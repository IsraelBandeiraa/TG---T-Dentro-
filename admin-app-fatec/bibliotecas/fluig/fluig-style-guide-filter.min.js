var FLUIGC=function(a,b,c,d){var e={};return a.filter=function(f,g){function h(a){var b=d?d.getLocale():"en_US",c={pt_BR:{selectText:"Selecionar",discardText:"Descartar",resultsHelper:"Utilize o campo acima para filtrar os resultados"},en_US:{selectText:"Select",discardText:"Discard",resultsHelper:"Use the field above to filter results"},es:{selectText:"Seleccionar",discardText:"Descartar",resultsHelper:"Utilice el campo arriba para filtrar los resultados"}};return c[b][a]}function j(a,c){c||(c={}),c.target=a,null==F&&(F="fluigfilter_"+Date.now());var d={id:F,multiSelect:!1,displayKey:"",style:{filterIconClass:"fluigicon-zoom-in",autocompleteTagClass:"tag-gray"},searchTimeout:200,minLength:1,tagMaxWidth:200,tableHeight:"260px"};return H=Object.create(d),b.extend(H,c),H}function k(){if(!c)throw new Error("Filter component: FLUIGCTemplates not found.");l()}function l(){m("template_filter_basic")}function m(a){e[a]=b(c["filter-basic"]).html(),n()}function n(){var c=b(H.target);c.addClass("form-control"),c.attr("data-autocomplete-"+H.id,""),b(H.target).replaceWith('<div id="fluigFilterInputToBeCloned"></div>'),b('[id="fluigFilterInputToBeCloned"]').append(c),inputFilterHTML=b('[id="fluigFilterInputToBeCloned"]').html();var d=h("selectText"),g=h("discardText"),i=h("resultsHelper"),j={id:H.id,filterIconClass:H.style.filterIconClass,inputFilter:inputFilterHTML,selectText:d,discardText:g,tableHeight:H.tableHeight,isMobile:a.utilities.checkDevice().isMobile,resultsHelper:i},k=Mustache.render(e.template_filter_basic,j);b("body").append(c),b('[id="fluigFilterInputToBeCloned"]').replaceWith(k),b('[id="fluigFilterInputToBeCloned"]').remove(),b("#"+H.id+"_fluigFilter "+f).remove(),b(c).insertBefore("#"+H.id+"_toggleTable"),H.target="#"+H.id+"_fluigFilter",G=H.target,r(),o(),p()}function o(){b(H.target).on("click","#"+H.id+"_toggleTable",function(a){var c=b(this).siblings(".bootstrap-tagsinput").find(".tt-input");if(J)return!1;if(b(".filter-panel",H.target).hasClass("fs-display-none")){var d=H.id+"_datatable",e=b("#"+d),f=e.parents(".fluig-filter").find(".tt-input").val();I=!0,c.trigger("focus"),b(".filter-panel",H.target).removeClass("fs-display-none"),b(".filter-panel",H.target).addClass("fs-display-block"),b(H.target).find(".tt-dropdown-menu").addClass("fs-display-none"),s("#"+d),setTimeout(function(){e.find('[id="fluig-data-table-input"]').val(f),e.find('[id="fluig-data-table-input"]').keyup()},100)}else I=!1,b(".filter-panel",H.target).removeClass("fs-display-block"),b(".filter-panel",H.target).addClass("fs-display-none"),b(H.target).find(".tt-dropdown-menu").removeClass("fs-display-none")})}function p(){var a="fluig.autocomplete.cursorchanged fluig.autocomplete.opened fluig.autocomplete.closed fluig.autocomplete.selected fluig.autocomplete.autocompleted fluig.autocomplete.beforeItemAdd fluig.autocomplete.itemAdded fluig.autocomplete.beforeItemUpdate fluig.autocomplete.itemUpdated fluig.autocomplete.beforeItemRemove fluig.autocomplete.itemRemoved fluig.autocomplete.maxTags fluig.autocomplete.focus fluig.autocomplete.blur";D.on(a,function(a){var b=a.namespace.split(".")[1];q(a,b),"itemAdded"===b&&q(a,"item.added")})}function q(a,c){var d=b.Event("fluig.filter."+c,{$input:b(f).siblings(".bootstrap-tagsinput").find(".tt-input"),item:a.item});b(f).trigger(d)}function r(){function c(a){return function(c,d){var e=[],f=new RegExp(c,"i"),g=null;b.each(a,function(a,b){if(f.test(b[H.displayKey])){g={};for(var c in b)g[c]=b[c];e.push(g)}}),d(e)}}if(!H.source)return void(console&&console.error("Fluig Filter: no source specified."));H.multiSelect?H.maxTags=void 0:H.maxTags=1,H.autocompleteType="tagAutocomplete";var d=Array.isArray(H.source)?c(H.source):H.source,e={source:d,displayKey:H.displayKey,templates:{tag:H.style.templateTag||null,suggestion:H.style.templateSuggestion||null,tipMessage:H.style.templateTipMessage||null},type:H.autocompleteType,tagClass:H.style.autocompleteTagClass,maxTags:H.maxTags,onMaxTags:H.onMaxTags,searchTimeout:H.searchTimeout,minLength:H.minLength,tagMaxWidth:H.tagMaxWidth,initDisabled:H.initDisabled},g="[data-autocomplete-"+H.id+"]";D=a.autocomplete(g,e),H.initDisabled&&C(!0),setTimeout(function(){var a=b.Event("fluig.filter.load.complete");b(f).trigger(a);var c=b.Event("fluig.filter.loadComplete");b(f).trigger(c)})}function s(c){if(!H.source)return void(console&&console.error("Fluig Filter: no source specified."));if(!H.table.header)return void(console&&console.error("Fluig Filter: no table header specified."));H.source.formatData=H.table.formatData||null,H.navButtons||(H.navButtons={forwardstyle:"btn-default",backwardstyle:"btn-default",enabled:!0});var d={dataRequest:H.source,header:H.table.header,renderContent:H.table.renderContent||null,classSelected:H.style.tableSelectedLineClass||null,tableStyle:H.style.tableStyle||null,search:{enabled:!0},scroll:{target:c,enabled:!1},navButtons:{enabled:0==H.navButtons.enabled?!1:!0,forwardstyle:H.navButtons.forwardstyle||"btn-default",backwardstyle:H.navButtons.backwardstyle||"btn-default"},multiSelect:H.multiSelect,mobileMainColumns:H.mobileMainColumns||[0,1]};Array.isArray(H.source)&&(d.navButtons.enabled=!1,d.search.onSearch=function(a){var c=[],d=new RegExp(a,"i"),e=null;b.each(H.source,function(a,b){if(d.test(b[H.displayKey])){e={};for(var f in b)e[f]=b[f];c.push(e)}}),E.reload(c)}),null!=E?(E.destroy(),E=a.datatable(c,d),E.on("fluig.datatable.onselectrow",function(a){for(i=0;i<a.selectedIndex.length;i++){var d=E.getRow(a.selectedIndex[i]);D.add(d),b(c).parents(".fluig-filter").find(".tt-input").val("")}I=!1,b(".filter-panel",H.target).removeClass("fs-display-block"),b(".filter-panel",H.target).addClass("fs-display-none"),b(H.target).find(".tt-dropdown-menu").removeClass("fs-display-none")}),E.on("fluig.datatable.loadcomplete",function(a){b(c).parents(".fluig-filter").find(".tt-input").on("keyup",function(a){I&&(b(c).find('[id="fluig-data-table-input"]').val(b(this).val()),b(c).find('[id="fluig-data-table-input"]').trigger("keyup"))})})):(E=a.datatable(c,d),E.on("fluig.datatable.onselectrow",function(a){for(i=0;i<a.selectedIndex.length;i++){var d=E.getRow(a.selectedIndex[i]);D.add(d),b(c).parents(".fluig-filter").find(".tt-input").val("")}I=!1,b(".filter-panel",H.target).removeClass("fs-display-block"),b(".filter-panel",H.target).addClass("fs-display-none"),b(H.target).find(".tt-dropdown-menu").removeClass("fs-display-none")}),E.on("fluig.datatable.loadcomplete",function(a){b(c).parents(".fluig-filter").find(".tt-input").on("keyup",function(a){I&&(b(c).find('[id="fluig-data-table-input"]').val(b(this).val()),b(c).find('[id="fluig-data-table-input"]').trigger("keyup"))})}))}function t(){return D.items()}function u(a,c){b(f).parent().on(a,c)}function v(a){D.add(a)}function w(){D.removeAll()}function x(){D.focus()}function y(a){C(a),D.disable(a)}function z(){D.open()}function A(){D.close(),b(".filter-panel",H.target).removeClass("fs-display-block").addClass("fs-display-none"),b(H.target).find(".tt-dropdown-menu").removeClass("fs-display-none")}function B(a){null!=E&&(E.destroy(),I=!1,b(".filter-panel",H.target).removeClass("fs-display-block"),b(".filter-panel",H.target).addClass("fs-display-none"),b(H.target).find(".tt-dropdown-menu").removeClass("fs-display-none")),j(G,a),D.destroy(),r()}function C(a){var c=a?"addClass":"removeClass";I=!1,J=a,b("#"+H.id+"_toggleTable","#"+H.id+"_fluigFilter")[c]("fs-cursor-not-allowed"),a&&A()}var D,E=null,F=null,G=f,H=j(f,g),I=!1,J=!1;return k(),{reload:B,getSelectedItems:t,add:v,removeAll:w,focus:x,disable:y,open:z,close:A,on:function(a,b){return u(a,b),this}}},a}(window.FLUIGC||{},window.jQuery,window.FLUIGCTemplates,window.top.WCMAPI);