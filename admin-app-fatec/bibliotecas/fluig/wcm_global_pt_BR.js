String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")};String.prototype.ltrim=function(){return this.replace(/^\s*/,"")};String.prototype.rtrim=function(){return this.replace(/\s*$/,"")};String.prototype.replaceAll=function(de,para){var str=this;var pos=str.indexOf(de);while(pos>-1){str=str.replace(de,para);pos=str.indexOf(de)}return(str)};
var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());function setCookie(c_name,value,expiredays){var exdate=new Date();exdate.setDate(exdate.getDate()+expiredays);document.cookie=c_name+"="+escape(value)+((expiredays==null)?"":";expires="+exdate.toGMTString())+"; path=/"}function getCookie(c_name){c_name=c_name.trim();if(document.cookie.length){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end===-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""}function ajaxRequestDefault(){var def={url:null,dataType:"json",cache:false,processData:false,contentType:"application/json; charset=UTF-8",type:"POST",styleGuide:false,success:function(){},error:function(args){WCMAPI.failHandler(args,this.styleGuide)}};return def}function TLib(){this.debug=false;var tLibSelf=this;this.browserName="none";this.browserVersion="none";this.defaltDelays=5000;this.userBar=null;this.searchTimer=null;this.sessExpired=false;this.sessTimeoutExpInt=null;this.sessTimeoutMsg=null;this.getBrowserName=function(){return tLibSelf.browserName};this.getBrowserVersion=function(){return tLibSelf.browserVersion};this.getDefaltDelays=function(){return tLibSelf.defaltDelays};this.setDefaltDelays=function(delay){tLibSelf.defaltDelays=delay};$(document).ready(function(){tLibSelf.identifyBrowser()})}TLib.prototype.domainId=null;TLib.prototype.domainName=null;TLib.prototype.defaultDomainURL=null;TLib.prototype.spaceAlias="";TLib.prototype.serverURL="";TLib.prototype.uploadURL="";TLib.prototype.contextPath="";TLib.prototype.protectedContextPath="";TLib.prototype.homePageCode="home";TLib.prototype.serverContextURL="";TLib.prototype.replicationServerEnabled=false;TLib.prototype.replicationServerCentralized=false;TLib.prototype.tenantCode="";TLib.prototype.tenantURI="";TLib.prototype.tenantPATH="";TLib.prototype.tenantURL="";TLib.prototype.organizationId=-1;TLib.prototype.isSAMLEnabled=false;TLib.prototype.idpHomePageURL="";TLib.prototype.isEditMode=false;TLib.prototype.fluigPaas=false;TLib.prototype.isFeatureServerEnabled=false;TLib.prototype.enabledFeatures=[];TLib.prototype.applicationCode="fluig";TLib.prototype.isLegacyLMSEnabled=false;TLib.prototype.isLegacyAppsEnabled=false;TLib.prototype.noCode=false;TLib.prototype.getApplicationCode=function(){return this.applicationCode};TLib.prototype.setApplicationCode=function(applicationCode){this.applicationCode=applicationCode};TLib.prototype.isFeatureEnabled=function(featureFlag){return !this.isFeatureServerEnabled||this.enabledFeatures.indexOf(featureFlag)>-1};TLib.prototype.isIdentityEnabled=function(){return this.isSAMLEnabled};TLib.prototype.getDefaultDomainURL=function(){return this.defaultDomainURL};TLib.prototype.setDefaultDomainURL=function(domainURL){this.defaultDomainURL=domainURL};TLib.prototype.failHandler=function(args,styleGuide){var messageError=function(message){if(styleGuide){FLUIGC.message.alert({size:"small",message:message,title:WCMC.messageErrorHeader,label:WCMC.messageLabel})}else{WCMC.messageError(message)}};var contentType;if(!WCMAPI.isUndefined(args.getResponseHeader)&&!WCMAPI.isUndefined(args.status)&&!WCMAPI.isUndefined(args.responseText)){if(typeof args.getResponseHeader==="function"){contentType=args.getResponseHeader("Content-Type")}else{contentType=args.getResponseHeader["Content-Type"]}if(contentType.match(/application\/json/i)==null){if(styleGuide){FLUIGC.message.alert({size:"small",message:args.responseText,title:"",label:WCMC.messageLabel})}else{WCMC.messageBox({id:"wcm-error-dialog",width:"500px",body:args.responseText})}}else{var response=JSON.parse(args.responseText||"null");if(response.message!==null&&typeof response.message==="object"){messageError(response.message.message);return}if(args.status){switch(args.status){case 500:messageError(response.message);break;case 404:messageError("Recurso não encontrado. Verifique o caminho e tente novamente.");break;default:messageError("Erro inesperado.");break}}}}else{if((!WCMAPI.isUndefined(args.tId))&&(!WCMAPI.isUndefined(args.tId))){WCMC.messageBox({id:"wcm-error-dialog",width:"600px",body:args.responseText})}}};TLib.prototype.isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};TLib.prototype.identifyBrowser=function(){this.browserName=FLUIGC.utilities.checkBrowser().name;this.browserVersion=FLUIGC.utilities.checkBrowser().version;$("body").addClass(FLUIGC.utilities.checkBrowser().name);$("body").addClass(FLUIGC.utilities.checkBrowser().version)};TLib.prototype.returnOk=function(response){if(response){try{if(response.constructor==Boolean){return true}if(response instanceof Obejct&&"error" in response){return false}else{return true}}catch(err){return true}}return false};TLib.prototype.callCommand=function(command,data,oObj,callback,errorCallback,dataType){$.ajax({type:"GET",url:this.serverURL+command,dataType:(dataType?dataType:"json"),success:function(response){callback.call(oObj,response,data)},error:function(XMLHttpRequest,textStatus,errorThrown){if(errorCallback){errorCallback.call(oObj,XMLHttpRequest,textStatus,errorThrown,data)}}})};TLib.prototype.extendSession=function(){var instance=this;if(!this.getUserIsLogged()){return}if(document.cookie.indexOf("BYSKA2=")==-1&&!this.sessExpired&&document.cookie.indexOf("BYSAL=")==-1){clearTimeout(this.sessTimeoutMsg);clearTimeout(this.sessTimeoutExpInt);this.sessTimeoutMsg=setTimeout(function(){WCMC.messageWarn("A sessão será expirada em instantes por inatividade...")},1680000);this.sessTimeoutExpInt=setTimeout(function(){instance.expireSession(instance)},1740000)}};TLib.prototype.expireSession=function(tLibSelf){tLibSelf.sessExpired=true;tLibSelf.logoff()};TLib.prototype.userIsLogged=false;TLib.prototype.getUserIsLogged=function(){return this.userIsLogged};TLib.prototype.setUserIsLogged=function(isLogged){if(isLogged){if(isLogged=="true"||isLogged==true){this.userIsLogged=true;return}}this.userIsLogged=false};TLib.prototype.getSpaceAlias=function(){return this.spaceAlias};TLib.prototype.setSpaceAlias=function(spaceAlias){this.spaceAlias=spaceAlias};TLib.prototype.getServerURL=function(){return this.serverURL};TLib.prototype.setServerURL=function(serverURL){this.serverURL=serverURL};TLib.prototype.getUploadURL=function(){return this.uploadURL};TLib.prototype.setUploadURL=function(uploadURL){this.uploadURL=uploadURL};TLib.prototype.getContextPath=function(){return this.contextPath};TLib.prototype.setContextPath=function(contextPath){this.contextPath=contextPath};TLib.prototype.getProtectedContextPath=function(){return this.protectedContextPath};TLib.prototype.setProtectedContextPath=function(cpath){this.protectedContextPath=cpath};TLib.prototype.getHomePageCode=function(){return this.homePageCode};TLib.prototype.getHomePage=function(){return this.getTenantURI()+"/"+this.getHomePageCode()};TLib.prototype.getServerContextURL=function(){return this.serverContextURL};TLib.prototype.setServerContextURL=function(serverContextURL){this.serverContextURL=serverContextURL};TLib.prototype.getReplicationServerEnabled=function(){return this.replicationServerEnabled};TLib.prototype.setReplicationServerEnabled=function(replicationServerEnabled){this.replicationServerEnabled=replicationServerEnabled};TLib.prototype.getReplicationServerCentralized=function(){return this.replicationServerCentralized};TLib.prototype.setReplicationServerCentralized=function(replicationServerCentralized){this.replicationServerCentralized=replicationServerCentralized};TLib.prototype.isReplicationServerAccessible=function(param,callback){var defaultLocation="Fluig";if(!WCMAPI.getReplicationServerEnabled()||WCMAPI.getUserLocationCode()==defaultLocation){callback(param,false);return}WCMAPI.Create({method:"POST",url:WCMAPI.getUserLocationUrl()+"/volume/api",crossDomain:true,dataType:"text",data:"status\n",headers:{"content-type":"text/plain"},success:function(data){callback(param,(data==="OK"))},error:function(args){callback(param,false)}})};TLib.prototype.pageId=null;TLib.prototype.setPageId=function(id){this.pageId=id};TLib.prototype.getPageId=function(){return this.pageId};TLib.prototype.pageCode=null;TLib.prototype.setPageCode=function(code){this.pageCode=code};TLib.prototype.getPageCode=function(){return this.pageCode};TLib.prototype.pageTitle=null;TLib.prototype.pageTitle=function(title){this.pageTitle=title};TLib.prototype.getPageTitle=function(){return this.pageTitle};TLib.prototype.pageType=null;TLib.prototype.setPageType=function(type){this.pageType=type};TLib.prototype.getPageType=function(){return this.pageType};TLib.prototype.pageLayout=null;TLib.prototype.setPageLayout=function(layoutId){this.pageLayout=layoutId};TLib.prototype.getPageLayout=function(){return this.pageLayout};TLib.prototype.parentPageCode=null;TLib.prototype.setParentPageCode=function(parentPageCode){this.parentPageCode=parentPageCode};TLib.prototype.getParentPageCode=function(){return this.parentPageCode};TLib.prototype.friendlyURL=null;TLib.prototype.setFriendlyURL=function(friendlyURL){this.friendlyURL=friendlyURL};TLib.prototype.getFriendlyURL=function(){return this.friendlyURL};TLib.prototype.themeId=null;TLib.prototype.setThemeId=function(id){this.themeId=id};TLib.prototype.getThemeId=function(){return this.themeId};TLib.prototype.colorMenu=null;TLib.prototype.setColorMenu=function(colorMenu){this.colorMenu=colorMenu};TLib.prototype.getColorMenu=function(){return this.colorMenu};TLib.prototype.colorBackground=null;TLib.prototype.setColorBackground=function(colorBackground){this.colorBackground=colorBackground};TLib.prototype.getColorBackground=function(){return this.colorBackground};TLib.prototype.imageBackground=null;TLib.prototype.setImageBackground=function(imageBackground){this.imageBackground=imageBackground};TLib.prototype.getImageBackground=function(){return this.imageBackground};TLib.prototype.imageLogo=null;TLib.prototype.setImageLogo=function(imageLogo){this.imageLogo=imageLogo};TLib.prototype.getImageLogo=function(){return this.imageLogo};TLib.prototype.timezone=null;TLib.prototype.setTimezone=function(timezone){this.timezone=timezone};TLib.prototype.getTimezone=function(){return this.timezone};TLib.prototype.spaceId=null;TLib.prototype.getSpaceId=function(){return this.spaceId};TLib.prototype.setSpaceId=function(id){this.spaceId=id};TLib.prototype.locale="pt_BR";TLib.prototype.localeDisplayName="português (Brasil)";TLib.prototype.tenantLocales=new Array();TLib.prototype.user="Guest";TLib.prototype.userCode="Guest";TLib.prototype.email="guest@wcm.com";TLib.prototype.userLogin=null;TLib.prototype.userLocationId=null;TLib.prototype.userLocationCode=null;TLib.prototype.userLocationUrl=null;TLib.prototype.getLocale=function(){return this.locale};TLib.prototype.getLocaleDisplayName=function(){return this.localeDisplayName};TLib.prototype.isAdmin=function(){return WCMSpaceAPI.SecurityService.ISADMIN({async:false}).content};TLib.prototype.setLocale=function(locale){this.locale=locale};TLib.prototype.setLocaleDisplayName=function(displayName){this.localeDisplayName=displayName};TLib.prototype.getUser=function(){return this.user};TLib.prototype.setUser=function(user){this.user=user};TLib.prototype.getUserLogin=function(){return this.userLogin};TLib.prototype.setUserLogin=function(login){this.userLogin=login};TLib.prototype.getUserLocationId=function(){return this.userLocationId};TLib.prototype.setUserLocationId=function(locationId){this.userLocationId=locationId};TLib.prototype.getUserLocationCode=function(){return this.userLocationCode};TLib.prototype.setUserLocationCode=function(locationCode){this.userLocationCode=locationCode};TLib.prototype.getUserLocationUrl=function(){return this.userLocationUrl};TLib.prototype.setUserLocationUrl=function(locationUrl){this.userLocationUrl=locationUrl};TLib.prototype.getUserId=function(){return this.userId};TLib.prototype.setUserId=function(userId){this.userId=userId};TLib.prototype.getOrganizationId=function(){return this.organizationId};TLib.prototype.getTenantId=function(){return this.organizationId};TLib.prototype.setOrganizationId=function(organizationId){this.organizationId=organizationId};TLib.prototype.getTenantCode=function(){return this.tenantCode};TLib.prototype.setTenantCode=function(tenantCode){this.tenantCode=tenantCode};TLib.prototype.getTenantURI=function(){return this.tenantURI};TLib.prototype.setTenantURI=function(tenantURI){this.tenantURI=tenantURI};TLib.prototype.getTenantPATH=function(){return this.tenantPATH};TLib.prototype.setTenantPATH=function(tenantPATH){this.tenantPATH=tenantPATH};TLib.prototype.getTenantURL=function(){return this.tenantURL};TLib.prototype.setTenantURL=function(tenantURL){this.tenantURL=tenantURL};TLib.prototype.getUserCode=function(){return this.userCode};TLib.prototype.setUserCode=function(userCode){this.userCode=userCode};TLib.prototype.getUserEmail=function(){return this.email};TLib.prototype.setUserEmail=function(email){this.email=email};TLib.prototype.applicationBasePath=function(appCode){return"/"+appCode+"/"};TLib.prototype.listeners=null;TLib.prototype.initListeners=function(){this.listeners={};this.listeners[this.LISTENER_LOGIN]=[];this.listeners[this.LISTENER_LOGOUT]=[];this.listeners[this.LISTENER_EDITMODEON]=[];this.listeners[this.LISTENER_EDITMODEOFF]=[];this.listeners[this.LISTENER_SAVEWIDGETPREFS_OPEN]=[];this.listeners[this.LISTENER_SAVEWIDGETPREFS_CLOSE]=[];this.listeners[this.LISTENER_BEFORE_SAVEWIDGETPREFS]=[];this.listeners[this.LISTENER_AFTER_SAVEWIDGETPREFS]=[]};TLib.prototype.addListener=function(oObj,eventName,callback,listenerName){if(!this.listeners){this.initListeners()}if(!listenerName){listenerName="DEFAULT"}var eventListener={source:oObj,callback:callback,name:listenerName};if(!(eventName in this.listeners)){this.listeners[eventName]=[]}var eventList=this.listeners[eventName];var vidx={};if(this.containsListener(eventName,eventListener,vidx)){eventList[vidx.idx].source=eventListener.source;eventList[vidx.idx].callback=eventListener.callback;return true}eventList.push(eventListener);this.listeners[eventName]=eventList;return true};TLib.prototype.removeListener=function(eventName,listenerName){if(!this.listeners){return}if(!listenerName){listenerName="DEFAULT"}if(eventName in this.listeners){for(index in this.listeners){if(this.listeners[index].name===listenerName){this.listeners.splice(index,1)}}}};TLib.prototype.fireEvent=function(eventName,data){if(!this.listeners){this.initListeners()}if(eventName in this.listeners){var eventList=this.listeners[eventName];for(key in eventList){try{eventList[key].callback.call(eventList[key].source,eventName,data)}catch(err){}}}};TLib.prototype.containsListener=function(eventName,listener,varIdx){if(!this.listeners){this.initListeners()}if(eventName in this.listeners){var eventListener=this.listeners[eventName];for(idx in eventListener){if(eventListener[idx].name==listener.name){if(varIdx){varIdx.idx=idx}return true}}}else{return false}return false};TLib.prototype.login=function(user,password){var instance=this;var response=WCMSpaceAPI.SecurityService.LOGIN(user,password);if(typeof response=="boolean"){if(response){instance.authSuccess()}else{instance.authError()}}else{instance.authError()}return response};TLib.prototype.logoff=function(){window.location.href="/portal/p/api/servlet/logout.do"};$(document).on("click",".langFlag",function(){$("#formLang").attr("action","/portal/api/servlet/I18NServlet?locale="+$(this).val());$("#formLang").submit()});TLib.prototype.authSuccess=function(){window.location.reload()};TLib.prototype.authError=function(){alert("Usuário/Senha inválidos")};TLib.prototype.logoffError=function(){alert("Erro efetuando logff")};TLib.prototype.loadCSS=function(path){var loaded=$("link[href*='"+path+"']");if(loaded.length==0){if(this._getParam(path,"v")==null){path+=(path.indexOf("?")>0?"&v=":"?v=")+this.version}$('<link rel="stylesheet" type="text/css" href="'+path+'" >').appendTo("head")}};TLib.prototype.alreadyLoadedJS=[];$.cachedScript=function(url,options){options=$.extend(options||{},{async:false,type:"GET",dataType:"script",cache:true,url:url});return $.ajax(options)};TLib.prototype.loadJS=function(path,callback){var loaded=$("script[src*='"+path+"']");if(loaded.length==0&&path in this.alreadyLoadedJS==false){if(path.indexOf("raphael")>0){this.alreadyLoadedJS[path]=true}if(this._getParam(path,"v")==null){path+=(path.indexOf("?")>0?"&v=":"?v=")+this.version}$.cachedScript(path).done(function(script,textStatus){if(callback){callback()}})}else{if(callback){callback()}}};TLib.prototype.jsBasePath=function(){var scripts=document.getElementsByTagName("script");var script=scripts[scripts.length-1];var src=script.src;if(!src){return""}else{return src.substring(0,src.lastIndexOf("/"))}};TLib.prototype.openEditMode=function(instId,slot){var isdecorator=$("#"+slot).attr("decorator");var targetId="_instance_"+instId+"_";var html=WCMSpaceAPI.PageService.RENDERINMODE({async:false},instId,"edit",isdecorator,isdecorator);var target="#"+targetId;$(target).replaceWith(html.content);if(loadWidgets){loadWidgets()}};TLib.prototype.editContent=function(control,instanceId){var slotContent=$(control).parents("div[slot=true]").get(0);var result=WCMSpaceAPI.PageService.RENDERINMODEWITHRESOURCESBYINSTANCE({async:false},instanceId,"edit").content;$.each(result.resources,function(key,value){if(value.type==="js"){WCMAPI.loadJS(value.resource)}else{if(value.type==="css"){WCMAPI.loadCSS(value.resource)}}});$(slotContent).html(result.content)};TLib.prototype.openViewMode=function(instId,slot){var isdecorator=$("#"+slot).attr("decorator");var targetId="_instance_"+instId+"_";var html=WCMSpaceAPI.PageService.RENDERINMODE({async:false},instId,"view",isdecorator,isdecorator);var target="#"+targetId;$(target).replaceWith(html.content);if(loadWidgets){loadWidgets()}};TLib.prototype.validateAndAuthenticateOAuth=function(consumerKey){var retvl=WCMSpaceAPI.OAuthService.VALIDATETOKENBYCONSUMERKEY({async:false},consumerKey);if(retvl&&retvl.message&&retvl.message.type=="ERROR"){var ret=WCMSpaceAPI.OAuthService.EXTERNALINITIATE({async:false},consumerKey);if(ret&&ret.content&&ret.content.authorizationURL){window.open(ret.content.authorizationURL,"_blank");return false}}return true};TLib.prototype.validateOAuth=function(consumerKey){var retvl=WCMSpaceAPI.OAuthService.VALIDATETOKENBYCONSUMERKEY({async:false},consumerKey);if(retvl&&retvl.message&&retvl.message.type=="ERROR"){return false}return true};TLib.prototype._isMobile=function(){if(navigator.userAgent.match(/android/i)!=null||navigator.userAgent.match(/iPhone/i)!=null||navigator.userAgent.match(/iPod/i)!=null||navigator.userAgent.match(/iPad/i)!=null){return true}else{return false}};TLib.prototype._isWebKit=function(){if(navigator.userAgent.match(/AppleWebKit/i)!=null){return true}else{return false}};TLib.prototype._isAppleMobile=function(){if(navigator.userAgent.match(/iPhone/i)!=null||navigator.userAgent.match(/iPod/i)!=null||navigator.userAgent.match(/iPad/i)!=null){return true}else{return false}};TLib.prototype.isIe=function(){return FLUIGC.utilities.checkBrowser().isIe()};TLib.prototype.isIe9=function(){return FLUIGC.utilities.checkBrowser().isIe9()};TLib.prototype.syncAjax=function(url){if(window.XMLHttpRequest){AJAX=new XMLHttpRequest()}else{AJAX=new ActiveXObject("Microsoft.XMLHTTP")}if(AJAX){AJAX.open("GET",url,false);AJAX.setRequestHeader("Content-type","application/x-www-form-urlencoded");AJAX.send();return AJAX.responseText}else{return false}};TLib.prototype.loaderCss=function(args){this.loadCSS(path)};TLib.prototype.loaderJs=function(path){this.loadJS(path)};TLib.prototype.getZIndex=function(){var max=0;max=Math.max.apply(null,$.map($("div"),function(e,n){if($(e).css("position")=="absolute"||$(e).css("position")=="fixed"){var jIndex=parseInt($(e).css("z-index"))||1;var hIndex=parseInt(e.style.zIndex)||1;if(hIndex>jIndex){return hIndex}return jIndex}}));return max==-Infinity?1:max};TLib.prototype.randomId=0;TLib.prototype.generateId=function(){this.randomId++;return"wcmid"+(this.randomId+1)};TLib.prototype.readHtml=function(options){var config=$.extend(new ajaxRequestDefault(),options);$.ajax(config)};TLib.prototype.Create=function(options){var def=new ajaxRequestDefault();def.type="POST";if(options.data){if(WCMAPI.isObject(options.data)){options.data=JSON.stringify(options.data)}}var config=$.extend(def,options);$.ajax(config)};TLib.prototype.Update=function(options){var def=new ajaxRequestDefault();def.type="PUT";if(options.data){if(WCMAPI.isObject(options.data)){options.data=JSON.stringify(options.data)}}var config=$.extend(def,options);$.ajax(config)};TLib.prototype.Read=function(options){var def=new ajaxRequestDefault();def.type="GET";if(options.data){if(WCMAPI.isObject(options.data)){options.data=JSON.stringify(options.data)}}var config=$.extend(def,options);$.ajax(config)};TLib.prototype.Delete=function(options){var def=new ajaxRequestDefault();def.type="DELETE";if(options.data){if(WCMAPI.isObject(options.data)){options.data=JSON.stringify(options.data)}}var config=$.extend(def,options);$.ajax(config)};TLib.prototype.isLastJS=function(resources,jsIndex){var isLastJs=true;jsIndex=jsIndex+1;for(var i=jsIndex;i<resources.length;i++){var resource=resources[i];if(resource.type==="js"){isLastJs=false;break}}return isLastJs};TLib.prototype.hasResource=function(resources,innerResource){var hasResource=false;for(var i=0;i<resources.length;i++){var resource=resources[i];if(resource.resource===innerResource.resource){hasResource=true;break}}return hasResource};TLib.prototype.convertFtl=function(appCode,fileNameFtl,pars,component,callback){if(pars&&this.isObject(pars)){pars=JSON.stringify(pars)}var html,response=WCMSpaceAPI.PageService.RENDERAPPLICATIONPARTIAL({async:false},appCode,fileNameFtl,pars);if(response&&response.content){html=response.content}if(html){var innerHtml=this.extractHtmlContentAndResources(html.content,appCode);if(innerHtml){if(innerHtml.resources&&innerHtml.resources.length>0){if(!html.resources){html.resources=innerHtml.resources}else{for(var i=0;i<innerHtml.resources.length;i++){var resource=innerHtml.resources[i];if(this.hasResource(html.resources,resource)===false){html.resources.push(resource)}}}}if(innerHtml.content){html.content=innerHtml.content}}if(html.resources&&html.resources.length>0){var hasJs=false;for(var i=0;i<html.resources.length;i++){var resource=html.resources[i];if(resource.type==="js"){hasJs=true}else{if(resource.type==="css"){this.loadCSS(resource.resource)}}}if(!hasJs&&callback){callback()}}else{if(callback){callback()}}var innerContent="";if(html.content){if(component!=undefined){if(component instanceof $===false){component=$("#"+component);component.html("")}for(var i=0;i<html.content.length;i++){component.append(html.content[i])}}}if(html.resources&&html.resources.length>0){for(var i=0;i<html.resources.length;i++){var resource=html.resources[i];if(resource.type==="js"){if(this.isLastJS(html.resources,i)===true){this.loadJS(resource.resource,callback)}else{this.loadJS(resource.resource)}}}}if(html.content){if(component!=undefined){this.loadWidgets()}else{var innerContent="";for(var i=0;i<html.content.length;i++){innerContent+=html.content[i].outerHTML}return innerContent}}}return""};TLib.prototype.extractHtmlContentAndResources=function(html,appCode){var htmlContent=$.parseHTML(html,null,true);var resources=[];var content=[];var response={};var contentIndex=0;if(htmlContent){for(var i=0;i<htmlContent.length;i++){var node=htmlContent[i];if(node&&node instanceof Element){var jNode=$(node);if(node.type==="text/css"){var cssResource={};cssResource.type="css";cssResource.resource="/"+appCode+"/"+jNode.attr("href");resources.push(cssResource)}else{if(node.type==="text/javascript"){var jsResource={};jsResource.type="js";var src=jNode.attr("src");jsResource.resource="";if(src.indexOf("ecm_resource")==-1&&(!WCMAPI.getServerContextURL()||src.indexOf(WCMAPI.getServerContextURL())==-1)){jsResource.resource="/"+appCode+"/"}jsResource.resource+=src;resources.push(jsResource)}else{content[contentIndex]=node;contentIndex+=1}}}}}response.content=content;response.resources=resources;return response};TLib.prototype.loadWidgets=function(){$(".wcm-widget-class").each(function(i,data){var wparams,wid,instanceId;$(this).removeClass("wcm-widget-class");wparams=$(this).data("params");wid=$(this).attr("id");if($(this).hasClass("super-widget")){if(wparams){if(wid){try{instanceId=+wid.split("_").pop();if(isNaN(instanceId)){instanceId=Date.now()}var re1=/(\w+)\.instance\((.*?|[ ]*)\)$/,re2=/(\w+)[\s]*:[\s]*/g,re3=/[\s](\w+)[\s]*:[\s]*/g,re4=/([\"]|[\'])(\w+)[\:]/g,result=wparams.match(re1),params=result[2]||"{}",servObj=window[result[1]];if(params.match(re4)){params=params.replace("{","{ ");params=params.replace(/"([^"]*)"/g,function(match,r){return'"'+r.replace(/(\w+)[\s]*:[\s]*/g," $1_o_ ")+'"'});params=params.replace(re3,' "$1": ').replace(/'/g,'"');params=params.replace(/(\w+)[\s]*_o_[\s]*/g,"$1: ");params=params.replace("{ ","{")}else{params=params.replace(/"([^"]*)"/g,function(match,r){return'"'+r.replace(/(\w+)[\s]*:[\s]*/g," $1_o_ ")+'"'});params=params.replace(re2,'"$1": ').replace(/'/g,'"');params=params.replace(/(\w+)[\s]*_o_[\s]*/g,"$1: ")}if(params){params=JSON.parse(params)}else{params={}}window[wid]=servObj.instance(instanceId,wid,params)}catch(e){if(console){console.error("Ocorreu um erro ao processar a widget: "+wid,wparams,e)}}}else{throw new Error("O elemento div da widget precisa ter um id no formato nome_instanceId")}}}else{if(wparams){if(wid){wid=wid+" = new "+wparams}else{wid="new "+wparams}try{(new Function(wid))()}catch(e){throw new Error("Ocorreu um erro ao tentar executar '"+wid+"': "+e)}}}})};TLib.prototype.convertFtlAsync=function(appCode,fileNameFtl,pars,callback,errorCallback){var self=this;if(pars&&self.isObject(pars)){pars=JSON.stringify(pars)}WCMSpaceAPI.PageService.RENDERAPPLICATIONPARTIAL({async:true,success:function(data){var html=data.content;var innerHtml=self.extractHtmlContentAndResources(html.content,appCode);if(innerHtml){if(innerHtml.resources&&innerHtml.resources.length>0){if(!html.resources){html.resources=innerHtml.resources}else{for(var i=0;i<innerHtml.resources.length;i++){var resource=innerHtml.resources[i];if(self.hasResource(html.resources,resource)===false){html.resources.push(resource)}}}}if(innerHtml.content){html.content="";for(var i=0;i<innerHtml.content.length;i++){html.content+=innerHtml.content[i].outerHTML}}}if(html.resources&&html.resources.length>0){for(var i=0;i<html.resources.length;i++){var resource=html.resources[i];if(resource.type==="js"){self.loadJS(resource.resource)}else{if(resource.type==="css"){self.loadCSS(resource.resource)}}}}callback(html.content)},errorCallback:function(err){if(errorCallback){errorCallback(err)}}},appCode,fileNameFtl,pars)};TLib.prototype.openFirstAccessWidget=function(pTitle){WCMSpaceAPI.PageService.RENDERFIRSTACCESSWIDGET({async:true,success:function(widget){if(!(WCMAPI.isUndefined(widget)||widget===null)&&WCMAPI.getPageCode()!="welcome"){var dateNow=Date.now().toString();WCMAPI.convertFtlAsync(widget,null,{dateNow:dateNow,modalTitle:pTitle},function(widgetHtml){setTimeout(function(){var htmlContainerModal='<div style="display: none;" id="container-modal-'+dateNow+'"></div>';$("body").append(htmlContainerModal);$("#container-modal-"+dateNow).append(widgetHtml);loadWidgets()},0)})}},errorCallback:function(err){if(errorCallback){errorCallback(err)}}})};TLib.prototype.isFirstLoginInThisSession=function(){var options={url:"/portal/api/rest/wcm/page/application/isFirstAccessInThisSession",contentType:"application/json",loading:false};FLUIGC.ajax(options,function(err,result){if(result){WCMAPI.checkLastDisplayedNewsVersion();if(WCMAPI.userLogin==="wcmadmin"){WCMAPI.isDefaultPassword()}}else{WCMAPI.openAdminWarning()}})};TLib.prototype.checkLastDisplayedNewsVersion=function(){var showVersion=WCMAPI.version.split("-")[0];var options={url:"/api/public/2.0/users/listData/"+WCMAPI.getUserLogin(),contentType:"application/json",loading:false};FLUIGC.ajax(options,function(err,data){if(data&&data.content){var displayedVersion=data.content.displayedVersion||"0.0.0";var numCurrentVersion=WCMAPI._getOnlyNumberVersion(showVersion);var numDisplayedVersion=WCMAPI._getOnlyNumberVersion(displayedVersion);if(!displayedVersion||numDisplayedVersion<numCurrentVersion){WCMAPI.openAdminNewsFluigVersion(showVersion)}else{WCMAPI.openAdminWarning()}}else{WCMAPI.openAdminWarning()}})};TLib.prototype.isDefaultPassword=function(){var options={url:"/portal/api/rest/wcm/core/security/isdefaultpassword",contentType:"application/json",dataType:"json",type:"GET",};FLUIGC.ajax(options,function(err,data){var objectReturn=data.content;if(objectReturn.isDefaultPassword){FLUIGC.modal({id:"default-password-modal",title:objectReturn.title,content:objectReturn.label,actions:[{label:objectReturn.close,classType:"btn-primary",autoClose:true,},{label:objectReturn.confirm,classType:"btn-default",bind:"onclick=\"location.href='./wcmuserpreferences'\""}]});WCMAPI.setFalseFirstAccessInThisSession()}})};TLib.prototype.openAdminNewsFluigVersion=function(showVersion){FLUIGC.ajax({url:"/usepolicyapi/api/rest/usepolicy/has/accepted",type:"GET"},function(err,data){if(data.content){WCMAPI.convertFtlAsync("wcm_newsfluigversion","view.ftl",{showVersion:showVersion},function(html){WCMAPI.setFalseFirstAccessInThisSession();$("body").append(html);loadWidgets()},function(error){WCMAPI.setFalseFirstAccessInThisSession()})}})};TLib.prototype.setFalseFirstAccessInThisSession=function(cb){var options={url:"/portal/api/rest/wcm/page/application/setFalseFirstAccessInThisSession",contentType:"application/json",dataType:"json",type:"POST",loading:false};FLUIGC.ajax(options,cb)};TLib.prototype._getOnlyNumberVersion=function(stringVersion){return parseInt(stringVersion.replace(/\./g,""))};TLib.prototype.openAdminWarning=function(){WCMSpaceAPI.PageService.ADMINWARNING({async:true,success:function(obj){if(!(WCMAPI.isUndefined(obj)||obj===null)&&obj.sizemessage!=0&&WCMAPI.getPageCode()!="welcome"){var sizeModal="normal";if(obj.sizemessage>2){sizeModal="large"}FLUIGC.modal({title:obj.title,size:sizeModal,content:{widgetCode:"wcm_adminwarning",ftl:"view.ftl",},data:{obj:obj}})}},errorCallback:function(err){if(errorCallback){errorCallback(err)}}})};TLib.prototype.updateWidgetPreferences=function(instanceId,prefs){var ret=WCMSpaceAPI.PageService.UPDATEPREFERENCES({async:false},instanceId,prefs);if(ret!=null){var pageEdit=getURLParameter("edit");var html=WCMSpaceAPI.PageService.RENDERINMODE({async:false},instanceId,"edit",pageEdit);if(html.resources&&html.resources.length>0){for(var i=0;i<html.resources.length;i++){if(html.resources[i].type=="js"){this.loadJS(html.resources[i].resource)}else{if(html.resources[i].type=="css"){this.loadCSS(html.resources[i].resource)}}}}var vInstID="#_instance_"+instanceId+"_";$(vInstID).empty();$(vInstID).replaceWith(html.content);WCMC.messageInfo(ret.message);return true}else{WCMC.messageError("Erro salvando preferências");return false}};TLib.prototype.updateUserWidgetPreferences=function(instanceId,prefs){var ret=WCMSpaceAPI.PageService.UPDATEUSERWIDGETPREFERENCES({async:false},instanceId,prefs);if(ret!=null){var pageEdit=getURLParameter("edit");var html=WCMSpaceAPI.PageService.RENDERINMODE({async:false},instanceId,"edit",pageEdit);if(html.resources&&html.resources.length>0){for(var i=0;i<html.resources.length;i++){if(html.resources[i].type=="js"){this.loadJS(html.resources[i].resource)}else{if(html.resources[i].type=="css"){this.loadCSS(html.resources[i].resource)}}}}var vInstID="#_instance_"+instanceId+"_";$(vInstID).empty();$(vInstID).replaceWith(html.content);WCMC.messageInfo(ret.message);return true}else{WCMC.messageError("Erro salvando preferências");return false}};function getURLParameter(name){return decodeURI((RegExp(name+"=(.+?)(&|$)").exec(location.search)||[,null])[1])}TLib.prototype.setSessionAttribute=function(name,value){WCMSpaceAPI.SessionService.SETATTRIBUTE({async:false},name,value)};TLib.prototype.getSessionAttribute=function(name){return WCMSpaceAPI.SessionService.GETATTRIBUTE({async:false},name)};TLib.prototype.setUserLogging=function(value){setSessionAttribute("user-logging",value)};TLib.prototype.manager=null;TLib.prototype.loadMask=function(config){return new WCMC.loadMask(config)};TLib.prototype._get=function(name){var url=window.location.search.replace("?","");var itens=url.split("&");for(n in itens){if(itens[n].match(name)){return decodeURIComponent(itens[n].replace(name+"=",""))}}return null};TLib.prototype._getParam=function(url,name){var itens=[];var newUrl=url.split("?");if(newUrl.length>1){itens=newUrl[1].split("&")}for(var i=0;i<itens.length;i++){if(itens[i].indexOf(name+"=")>-1){return decodeURIComponent(itens[i].replace(name+"=",""))}}return null};TLib.prototype._getAllParams=function(url){var params={};if(typeof url==="string"){url.replace(/[?&]+([^=&]+)=?([^&]*)/gi,function(match,key,value){params[key]=value})}return params};TLib.prototype.replaceAll=function(str,de,para){var pos=str.indexOf(de);while(pos>-1){str=str.replace(de,para);pos=str.indexOf(de)}return(str)};TLib.prototype.isJSON=function(o){try{var obj=JSON.parse(o||"null");return !(obj===undefined||obj===null)}catch(error){return false}};TLib.prototype.isUndefined=function(o){try{return o===undefined}catch(error){return true}};TLib.prototype.isNull=function(o){try{return o===null}catch(error){return true}};TLib.prototype.isString=function(o){return typeof o==="string"};TLib.prototype.isNumber=function(o){return typeof o==="number"};TLib.prototype.stringify=function(o){return encodeURI(JSON.stringify(o))};TLib.prototype.isObject=function(o){return $.isArray(o)||$.isPlainObject(o)||$.isFunction(o)};TLib.prototype.cloneObject=function(source){var newObj=(source instanceof Array)?[]:{};for(i in source){if(i=="clone"){continue}if(source[i]&&typeof source[i]=="object"){newObj[i]=this.cloneObject(source[i])}else{newObj[i]=source[i]}}return newObj};TLib.prototype.isEmpty=function(o){return $.trim(o)===""};TLib.prototype.getSourceImage=function(imageSource,options,cb){var that=this;try{loadImage(imageSource,function(img,data){try{if(img.type==="error"||!that.hasExifProp(data)){cb(imageSource)}else{cb(img.toDataURL())}}catch(e){console.error(e);cb(imageSource)}},options)}catch(e){cb(imageSource)}};TLib.prototype.hasExifProp=function(data){return data.exif&&data.exif.get("Orientation")};TLib.prototype.validateXSS=function(data,replace){var returnValue;var dataValue;var inputSource=false;if(WCMAPI.isUndefined(data.value)){dataValue=data}else{inputSource=!inputSource;dataValue=data.value}if(WCMAPI.isString(dataValue)){if(!replace){returnValue=FLUIGC.utilities.preventXSS(dataValue)}else{returnValue=FLUIGC.utilities.preventXSS(dataValue);returnValue=returnValue.replace(/&gt;|&lt;/gi,"")}return inputSource?$(data).val(returnValue):returnValue}else{return dataValue}};if(window.WCMAPI==undefined){window.WCMAPI=new TLib}WCM={};WCM.contextUrl=WCMAPI.getContextPath()+"/wcm";WCM.restUrl="/wcm/api/rest/wcm/";$.ajaxSetup({converters:{"text application/json":JSON.parse},beforeSend:function(xhr,settings){var jwt=getCookie("jwt.token");var hasAuthorizationHeader=settings.headers&&settings.headers.Authorization;if(jwt&&!hasAuthorizationHeader){xhr.setRequestHeader("Authorization","Bearer "+jwt)}}});setInterval(function(){noTimeOut()},900000);function noTimeOut(){if(WCMAPI.getUserId()!=null&&WCMAPI.getUserId()!=undefined){try{WCMAPI.syncAjax(WCMAPI.contextPath+"/p/api/servlet/ping/1")}catch(err){}try{WCMSpaceAPI.SessionService.KEEPALIVE({async:false})}catch(err){}try{WCMAPI.syncAjax("/ecm/ping/2")}catch(err){}try{WCMAPI.syncAjax("/webdesk/ping/3")}catch(err){}try{WCMAPI.syncAjax("/social/ping/4")}catch(err){}try{WCMAPI.syncAjax("/api/servlet/ping/5")}catch(err){}if(WCMAPI.isLegacyLMSEnabled){try{WCMAPI.syncAjax("/lms/protected/ping/6")}catch(err){}}}}if(window.$&&"ui" in window.$&&"dialog" in window.$.ui){$.extend($.ui.dialog.prototype.options,{draggable:false,modal:true,resizable:false,show:"fade",title:"Atenção",close:function(){$(this).dialog("destroy")}})};(function($){$.fn.onScrollEnd=function(cb){if(this[0]==window||this[0]==document.body){$(window).scroll(function(){if($(window).scrollTop()+$(window).height()>=$(document).height()-50){cb.call(this)}})}else{var padding=parseInt(this.css("padding-top"),10)+parseInt(this.css("padding-bottom"),10);this.scroll(function(){var igual=($(this).scrollTop()+$(this).height())>=(this.scrollHeight-padding-1);if(igual){cb.call(this)}})}}})(jQuery);(function($){function runPlugin(elm,options){var top=elm.offset().top,w=elm.outerWidth(),wcss=elm[0].style.width,left=elm.offset().left;$(window).on("resize",function(){elm.css({position:"static",top:top,width:wcss});top=elm.offset().top;w=elm.outerWidth();wcss=elm[0].style.width;left=elm.offset().left});$(document).on("scroll",function(){if($(this).scrollTop()>=(top-options.stopPoint)){elm.css({position:"fixed",top:options.stopPoint||0,width:w,left:left})}else{elm.css({position:"static",top:top,width:wcss})}})}$.fn.becomeFixed=function(options){if(!options){options={}}if(!options.stopPoint){options.stopPoint=0}this.each(function(idx,data){runPlugin($(data),options)})}})(jQuery);WCMC=new Object();function equalHeight(group){var tallest=0;group.each(function(){var thisHeight=$(this).height();if(thisHeight>tallest){tallest=thisHeight}});group.height(tallest)}$(document).ready(function(){equalHeight($(".form-equal"))});$(window).on("resize",function(){equalHeight($(".form-equal"))});/*!
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,window,undefined){var elems=$([]),jq_resize=$.resize=$.extend($.resize,{}),timeout_id,str_setTimeout="setTimeout",str_resize="resize",str_data=str_resize+"-special-event",str_delay="delay",str_throttle="throttleWindow";jq_resize[str_delay]=250;jq_resize[str_throttle]=true;$.event.special[str_resize]={setup:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout]||this.nodeType!==1){return false}var elem=$(this);elems=elems.add(elem);$.data(this,str_data,{w:elem.width(),h:elem.height()});if(elems.length===1){loopy()}},teardown:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false}var elem=$(this);elems=elems.not(elem);elem.removeData(str_data);if(!elems.length){clearTimeout(timeout_id)}},add:function(handleObj){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false}var old_handler;function new_handler(e,w,h){var elem=$(this),data=$.data(this,str_data);if(data!==undefined){data.w=w!==undefined?w:elem.width();data.h=h!==undefined?h:elem.height()}old_handler.apply(this,arguments)}if($.isFunction(handleObj)){old_handler=handleObj;return new_handler}else{old_handler=handleObj.handler;handleObj.handler=new_handler}}};function loopy(){timeout_id=window[str_setTimeout](function(){elems.each(function(){var elem=$(this),width=elem.width(),height=elem.height(),data=$.data(this,str_data);if(width!==data.w||height!==data.h){elem.trigger(str_resize,[data.w=width,data.h=height])}});loopy()},jq_resize[str_delay])}})(jQuery,this);WCMC.loadMask=function(cfg){var events=new Array();var config={};var defaults={overlayId:WCMAPI.generateId(),msgboxId:WCMAPI.generateId(),body:'<div style="text-shadow: 1px 1px white;padding:10px;">Carregando...</div><img src="'+WCMAPI.getContextPath()+'/resources/images/rel_interstitial_loading.gif" />',targetId:"body",styleGuide:false};var merge=function(defaults){config=$.extend(defaults,cfg)};merge(defaults);var functions=$({bind:function(name,func){if($.inArray(name,events)>-1){func()}functions.bind(name,func)},hide:function(){bd.hide();root.hide();overlay.hide()},show:function(){this.resize();overlay.fadeIn();root.fadeIn();bd.fadeIn()},resize:function(){var container=$(config.targetId=="body"?"body":"#"+config.targetId);var w=container.outerWidth(true);var h=container.outerHeight(true);var t=0;var l=0;var position=container.position();if(position!=null&&position!=undefined){t=position.top;l=position.left}overlay.css("width",w);overlay.css("height",h);overlay.css("top",t);overlay.css("left",l);root.css("width",w);root.css("height",h);root.css("top",t);root.css("left",l);bd.css("top",h/2-30)},remove:function(){bd.remove();root.remove();overlay.remove();msgBox.remove()}});var target=$(config.targetId=="body"?"body":"#"+config.targetId);var w=target.css("width");var h=target.css("height");var overlay=$("<div>");overlay.attr("id",config.overlayId);overlay.css("vertical-align","middle");overlay.css("opacity","0.3");overlay.css("position",config.targetId=="body"?"fixed":"absolute");overlay.css("left","0px");overlay.css("top","0px");overlay.css("right","0px");overlay.css("bottom","0px");overlay.css("-moz-box-shadow","0 1px 10px #ccc");overlay.css("-webkit-box-shadow","0 1px 10px #ccc");overlay.css("box-shadow","0 1px 10px #ccc");overlay.css("background-color","#ccc");if(config.styleGuide===true){overlay.addClass("modal-legacy-background")}else{overlay.css("z-index",WCMAPI.getZIndex()+1)}if(config.targetId=="body"){overlay.css("top","0px");w="100%";h="100%"}target.append(overlay);var root=$("<div>");root.attr("id",config.msgboxId);root.css("text-align","center");var bd=$("<div>");bd.html(config.body);bd.attr("name","bd");bd.css("width","250px");bd.css("height","60px");bd.css("background-color","#E9EAF0");bd.css("margin-right","auto");bd.css("margin-left","auto");bd.css("border-radius","5px");bd.css("-webkit-box-shadow","0 1px 10px black");bd.css("-moz-box-shadow","0 1px 10px black");bd.css("box-shadow","0 1px 10px black");bd.css("position","relative");root.css("left","0px");root.css("top","0px");root.css("right","0px");root.css("bottom","0px");root.css("position",config.targetId=="body"?"fixed":"absolute");if(config.styleGuide===true){root.addClass("modal-legacy-background")}else{root.css("z-index",WCMAPI.getZIndex()+1)}if(config.body!=""){root.append(bd)}target.append(root);var msgBox=$("<div>");msgBox.attr("id",config.msgboxId);msgBox.attr("context",[config.overlayId,"tl","tl"]);msgBox.css("width",w);msgBox.css("height",h);functions[0]["hide"]();functions.trigger("loadMask-load");events.push("loadMask-load");return functions[0]};var renderHtml;WCMC.panel=function(cfg){if(WCMC.panel.count==undefined||WCMC.panel.count==0){WCMC.panel.count=1;$("body").css("overflow","hidden");if(document.activeElement){document.activeElement.blur()}else{setTimeout(function(){$(".wcm-panel-bt-close").trigger("focus")},100)}}else{WCMC.panel.count+=1}if(cfg.height=="100%"){cfg.height=$(window).height()-180}var panel={};var defaults={url:null,idDivModal:null,draggable:false,maximized:false,top:null,left:null,width:700,modal:true,title:"&nbsp;",btmaximize:true,showbtclose:true,showbtarea:true,extractCSSJS:true,btcloselabel:"Fechar",bodyContent:null,showCloseIcon:true,params:null,styleGuide:false};panel.merge=function(defaults){config=$.extend(defaults,cfg)};panel.merge(defaults);$(window).on("resize",function(){if(config.btmaximize){panel.resize()}});var events=new Array();var idRandomContent=WCMAPI.generateId();var config;var status={};var loadMask=new WCMC.loadMask({styleGuide:config.styleGuide});loadMask.show();var mask=new WCMC.loadMask({body:"",styleGuide:config.styleGuide});var functions=$({bind:function(name,func){if($.inArray(name,events)>-1){func()}functions.bind(name,func)},close:function(){panel.close()},maximize:function(){panel.maximize()},setWidth:function(val){config.width=val;panel.setWidth(val)},getWidth:function(){return panel.getWidth()},setHeight:function(val){config.height=val;panel.setHeight(val)},getHeight:function(){return panel.getHeight()},disableButton:function(indexButton){panel.disableButton(indexButton)},enableButton:function(indexButton){panel.enableButton(indexButton)},getFooterButtons:function(){return panel.getFooterButtons()},changeTitle:function(title){panel.changeTitle(title)}});panel.changeTitle=function(title){$("#wcm-panel-"+idRandomContent+" .wcm-panel-title").html(title)};panel.disableButton=function(indexButton){var panelButton=$("#panel-button-"+idRandomContent+"-"+indexButton);if(panelButton.length!=0){panelButton.attr("disabled","disabled")}};panel.enableButton=function(indexButton){var panelButton=$("#panel-button-"+idRandomContent+"-"+indexButton);if(panelButton.length!=0){panelButton.removeAttr("disabled")}};panel.close=function(){WCMC.panel.count-=1;if(WCMC.panel.count==0){$("body").css("overflow","auto")}functions.trigger("panel-close");divMain.find("embed").hide();divMain.find("object").hide();divMain.remove();mask.remove();loadMask.remove()};panel.btclose=function(){functions.trigger("panel-button-close");panel.close()};panel.maximize=function(){status.maximized=!status.maximized;panel.resize()};panel.resize=function(){if(!status.maximized){divBtMaximize.removeClass("wcm-panel-header-bt-minimize").addClass("wcm-panel-header-bt-maximize");divMain.css("top",status.top).css("left",status.left);if(config.draggable){divMain.draggable({disabled:false});divHeader.css("cursor","move")}panel.setWidth(config.width);if(cfg.customButtons!=null&&cfg.customButtons!=undefined){panel.setHeight(isNaN(window.innerHeight)?window.clientHeight-170:window.innerHeight-170)}else{panel.setHeight(isNaN(window.innerHeight)?window.clientHeight-100:window.innerHeight-100)}panel.centralize();functions.trigger("panel-resize",[config.width,config.height])}else{if(divBtMaximize!=undefined&&$(".wcm-panel-header-bt-maximize").length>0){divBtMaximize.removeClass("wcm-panel-header-bt-maximize").addClass("wcm-panel-header-bt-minimize")}status.top=divMain.css("top");status.left=divMain.css("left");divMain.css("top","10px").css("left","10px");if(config.draggable){divMain.draggable({disabled:true});divHeader.css("cursor","default")}var tempWidth=$(window).width()-(divMain.outerWidth(true)-divContent.width())-divContent.width()+status.width;var tempHeight=$(window).height()-divHeader.outerHeight()-divFooter.outerHeight();panel.setWidth(tempWidth-20);if(config.showbtarea){panel.setHeight(tempHeight-60)}else{panel.setHeight(tempHeight-divFooter.outerHeight())}functions.trigger("panel-resize",[tempWidth,tempHeight])}loadMask.show();mask.show();panel.scrollwidth()};panel.setWidth=function(val){status.width=val;divTopCenter.width(status.width);divMiddleCenter.width(status.width);divBottomCenter.width(status.width)};panel.getWidth=function(){return status.width};panel.setHeight=function(val){status.height=val;divContent.height(status.height);if(config.showbtarea){divMiddleCenter.height(divHeader.outerHeight()+divContent.outerHeight()+divFooter.outerHeight())}else{divMiddleCenter.height(divHeader.outerHeight()+divContent.outerHeight())}divMiddle.height(divMiddleCenter.outerHeight())};panel.getHeight=function(){return status.height};panel.centralize=function(){if(config.top==null){divMain.css("top",10)}if(config.left==null){status.left=($(window).width()-divMain.width())/2;divMain.css("left",status.left)}};panel.scrollwidth=function(){};panel.getFooterButtons=function(){return $("button",divFooter)};extractCss=function(html,url){var attr=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;var styles=new Array();while(html){var index=html.indexOf("<link");var match;var css;var fullCss;var temp;if(index==-1){break}else{html=html.substr(index);match=html.match("/>");fullCss=css=html.substr(0,match.index);temp=css.match(attr);for(j=0;j<temp.length;j++){if(temp[j].substr(0,4)=="href"){css=temp[j].substr(6);css=css.substr(0,css.indexOf('"'));if(url!=null&&url!=undefined){css=url+css}styles.push(css)}}renderHtml=renderHtml.replace(fullCss+"/>","");html=html.substr(match.index)}}if(styles){for(i=0;i<styles.length;i++){WCMAPI.loaderCss(styles[i])}}};var scripts=[];var extractScriptsAndCss=function(html,url,callBack){scripts=new Array();var attr=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g;renderHtml=html;while(html){var index=html.indexOf("<script");var match;var script;var fullScript;var temp;if(index==-1){break}else{html=html.substr(index);match=html.match("<\/script>");fullScript=script=html.substr(0,match.index);temp=script.match(attr);for(j=0;j<temp.length;j++){if(temp[j].substr(0,3)=="src"){script=temp[j].substr(5);script=script.substr(0,script.indexOf('"'));if(url!=null&&url!=undefined){script=url+script}scripts.push(script)}}renderHtml=renderHtml.replace(fullScript+"<\/script>","");html=html.substr(match.index)}}extractCss(renderHtml,url)};status.width=config.width;status.height=config.height;if(status.width===undefined){status.width=0}if(status.height===undefined){status.height=0}var divMain=$("<div id='wcm-panel-"+idRandomContent+"' class='wcm-panel modal-legacy'></div>");if(!config.styleGuide){divMain.css("z-index",WCMAPI.getZIndex()+1)}var divTop=$("<div class='wcm-panel-top'></div>");divTop.append("<div class='wcm-panel-top-left wcm-panel-left'></div>");var divTopCenter=$("<div class='wcm-panel-top-center wcm-panel-left'></div>");divTopCenter.width(config.width);divTop.append(divTopCenter);divTop.append("<div class='wcm-panel-top-right wcm-panel-left'></div>");divMain.append(divTop);var divMiddle=$("<div class='wcm-panel-middle'></div>");divMiddle.append("<div class='wcm-panel-middle-left wcm-panel-left'></div>");var divMiddleCenter=$("<div class='wcm-panel-middle-center wcm-panel-left'></div>");divMiddleCenter.width(config.width);divMiddleCenter.height(config.height);var divHeader=$("<div class='wcm-panel-header wcm-panel-left'></div>");var divTitle=$("<div class='wcm-panel-title wcm-panel-left'>"+config.title+"</div>");divHeader.append(divTitle);if(config.showCloseIcon){var divBtClose=$("<div class='wcm-panel-header-bt-close wcm-panel-right'>&nbsp;</div>");if(config.buttonsCloseFunction!=undefined){divBtClose.on("click",function(){eval(config.buttonsCloseFunction)()})}else{divBtClose.on("click",panel.btclose)}divHeader.append(divBtClose)}if(config.btmaximize){var divBtMaximize=$("<div class='wcm-panel-header-bt-maximize wcm-panel-right'>&nbsp;</div>");divBtMaximize.on("click",panel.maximize);divHeader.append(divBtMaximize)}divMiddleCenter.append(divHeader);var divContent=$("<div class='wcm-panel-content wcm-panel-left'></div>");if(config.bodyContent!=null){divContent.append(config.bodyContent)}else{if(config.url&&config.url.indexOf("#")===0){divContent.append($(config.url))}}divContent.height(config.height);divMiddleCenter.append(divContent);var divFooter=$("<div class='wcm-panel-footer wcm-panel-left'></div>");if(config.showbtclose){var closeBt=$("<button type='button' alt='"+config.btcloselabel+"' class='wcm-panel-bt-close wcm-panel-right totvs-btn-action'>"+config.btcloselabel+"</button>");closeBt.on("click",function(){panel.btclose()});divFooter.append(closeBt)}if(cfg.customButtons!=null&&cfg.customButtons!=undefined){$.each(cfg.customButtons.reverse(),function(i,val){var customBt=$("<button id='panel-button-"+idRandomContent+"-"+(cfg.customButtons.length-1-i)+"' type='button' class='wcm-panel-bt-custom wcm-panel-right totvs-btn-action'>"+val+"</button>");customBt.on("click",function(){functions.trigger("panel-button-"+(cfg.customButtons.length-1-i))});divFooter.append(customBt)})}if(!config.showbtarea){divFooter.hide();divFooter.height("0px")}divMiddleCenter.append(divFooter);divMiddle.append(divMiddleCenter);divMiddle.append("<div class='wcm-panel-middle-right wcm-panel-left'></div>");divMain.append(divMiddle);var divBottom=$("<div class='wcm-panel-bottom'></div>");divBottom.append("<div class='wcm-panel-bottom-left wcm-panel-left'></div>");var divBottomCenter=$("<div class='wcm-panel-bottom-center wcm-panel-left'></div>");divBottomCenter.width(config.width);divBottom.append(divBottomCenter);divBottom.append("<div class='wcm-panel-bottom-right wcm-panel-left'></div>");divMain.append(divBottom);if(config.modal){mask.show()}if(config.idDivModal!=null){$("#"+config.idDivModal).append(divMain)}else{$("body").append(divMain)}if(config.draggable){divMain.draggable({cursor:"move",handle:".wcm-panel-header",scroll:"false",containment:"body"}).disableSelection();divHeader.css("cursor","move")}divMiddleCenter.height(divHeader.outerHeight(true)+divContent.outerHeight(true)+divFooter.outerHeight(true));divMiddle.height(divMiddleCenter.outerHeight(true));panel.centralize();divMain.on("click",panel.click);if(config.maximized){status.maximized=false;panel.maximize()}if(config.modal){panel.click=function(e){if(WCMAPI.getZIndex()!=divMain.css("z-index")&&!config.styleGuide){divMain.css("z-index",WCMAPI.getZIndex()+1)}}}if(config.bodyContent===null){if(cfg.url!=null&&cfg.url!=undefined){var urlPath=cfg.url.substr(0,cfg.url.lastIndexOf("/"));var appCode=urlPath.substr(urlPath.lastIndexOf("/")+1,urlPath.length);urlPath+="/";var nameFile=cfg.url.substr(cfg.url.lastIndexOf("/")+1,cfg.url.length);var ext=nameFile.substr(nameFile.length-4,nameFile.length);if(ext.toLowerCase()===".ftl"){WCMAPI.convertFtl(appCode,nameFile,cfg.params,divContent,cfg.callBack);panel.scrollwidth();functions.trigger("panel-load");events.push("panel-load");loadMask.hide()}else{var data=WCMAPI.syncAjax(cfg.url);if(config.extractCSSJS){extractScriptsAndCss(data,urlPath,cfg.callBack)}divContent.empty().append(renderHtml);panel.scrollwidth();if(scripts){for(i=0;i<scripts.length;i++){if(i+1===scripts.length){WCMAPI.loadJS(scripts[i],cfg.callBack)}else{WCMAPI.loadJS(scripts[i])}}}else{if(cfg.callBack){cfg.callBack()}}functions.trigger("panel-load");events.push("panel-load");loadMask.hide()}}else{if(config.extractCSSJS){extractScriptsAndCss(cfg.data,urlPath,cfg.callBack)}divContent.empty().append(renderHtml);panel.scrollwidth();if(scripts){for(i=0;i<scripts.length;i++){if(i+1===scripts.length){WCMAPI.loadJS(scripts[i],cfg.callBack)}else{WCMAPI.loadJS(scripts[i])}}}else{if(cfg.callBack){cfg.callBack()}}functions.trigger("panel-load");events.push("panel-load");loadMask.hide()}}if(config.bodyContent!=null){loadMask.hide()}functions.bind("panel-resize",function(event,data){if(grid=$(".wcm-panel-content .ui-jqgrid-btable:visible")){grid.each(function(index){gridId=$(this).attr("id");$("#"+gridId).setGridWidth(data-50)})}});loadWidgets();return functions[0]};(function(){var panel;var message=function(config){var merge=function(defaults){config=$.extend(defaults,config)};var defaults={width:400,modal:true,icon:"infoicon",header:"Mensagem",btmaximize:false,bodyContent:'<div><span class="messageBox-'+config.icon+'"></span><p class="messageBox-text">'+config.body+"</p></div>"};merge(defaults);config.title=config.header;var panel=WCMC.panel(config);var functions=$({bind:function(name,func){panel.bind(name,func)},close:function(){panel.close()}});return functions[0]};WCMC.messageBox=function(config){return message(config)};WCMC.messageInfoIcon="infoicon";WCMC.messageInfoHeader="Sucesso!";WCMC.messageInfo=function(msg){return WCMC.messageBox({header:WCMC.messageInfoHeader,body:msg,icon:WCMC.messageInfoIcon})};WCMC.messageWarnIcon="warnicon";WCMC.messageWarnHeader="Aviso";WCMC.messageWarn=function(msg){return WCMC.messageBox({header:WCMC.messageWarnHeader,body:msg,icon:WCMC.messageWarnIcon})};WCMC.messageErrorIcon="erroricon";WCMC.messageErrorHeader="Erro";WCMC.messageError=function(msg){return WCMC.messageBox({header:WCMC.messageErrorHeader,body:msg,icon:WCMC.messageErrorIcon})};WCMC.messageLabel="Fechar"})();(function(window,document,$,undefined){var i18n={pt_BR:{"forbinden.title":"A\u00E7\u00E3o cancelada. ","forbinden.and":" e ","forbiden.message":" n\u00E3o pertencem a mesma n\u00FAvem de relacionamento.","error.generic":"Ocorreu uma falha na comunica\u00E7\u00E3o. Atualize a p\u00E1gina e tente novamente. Widget","error.title":"Erro",},en_US:{"forbinden.title":"Action canceled. ","forbinden.and":" and ","forbiden.message":" not belong to the same relationship cloud.","error.generic":"Ocorreu uma falha na comunica\u00E7\u00E3o. Atualize a p\u00E1gina e tente novamente. Widget","error.title":"Erro",},es:{"forbinden.title":"Acci\u00F3n cancelada. ","forbinden.and":" y ","forbiden.message":" no pertenecer a la misma relaci\u00F3n nube.","error.generic":"Ocorreu uma falha na comunica\u00E7\u00E3o. Atualize a p\u00E1gina e tente novamente. Widget","error.title":"Erro",}};if(!window.GLOBAL_EVENT_CACHE){window.GLOBAL_EVENT_CACHE={}}function mergeObjects(source,dest){var bCopy=Object.create(dest);for(var k in source){var prop=source[k];if(typeof prop==="object"&&prop instanceof Object&&!(prop instanceof Array)){bCopy[k]=mergeObjects(source[k],dest[k])}else{bCopy[k]=prop}}return bCopy}function extend(params){var obj=Object.create(this);var prevBinding,hasNewBindingObject;if(obj.bindings){prevBinding=Object.create(obj.bindings)}if(params){for(var k in params){if(k==="bindings"){hasNewBindingObject=true}obj[k]=params[k]}}if(hasNewBindingObject&&prevBinding){obj.bindings=mergeObjects(obj.bindings,prevBinding)}return obj}function bindExceptions(ev,evt,el){if(ev[0].indexOf("keydown")<=-1&&ev[0].indexOf("keypress")<=-1&&el.type!=="checkbox"&&el.type!=="radio"){evt.preventDefault()}}function instance(instanceId,parentDom,customParams){var obj=Object.create(this);var instanceIdOld=instanceId;var widgetId=parentDom;var wBinds;instanceId=instanceId||WCMAPI.generateId();obj.instanceId=instanceId;obj.DOM=$("#"+parentDom);if(!instanceIdOld){widgetId=parentDom+"_"+instanceId;obj.DOM.attr("id",parentDom+"_"+instanceId);obj.DOM=$("#"+parentDom+"_"+instanceId)}obj.eventCache={};if(!obj.DOM.length){obj.DOM=$("body")}if(!window.FLUIG_BINDS){window.FLUIG_BINDS={}}window.FLUIG_BINDS[widgetId]={};wBinds=window.FLUIG_BINDS[widgetId];if(obj.bindings&&obj.bindings.local){wBinds.local=[];for(var k in obj.bindings.local){var selector=obj.bindings.local[k],parentDOM=$(obj.DOM||"body");for(var i=0;i<selector.length;i++){(function(){var evs=selector[i],cachedEvent=k+"_"+evs;wBinds.local.push(cachedEvent);if(!obj.eventCache[cachedEvent]){obj.eventCache[cachedEvent]=true;var ev=evs.split("_");parentDOM.on(ev[0],"[data-"+k+"]",function(evt){bindExceptions(ev,evt,this);obj[ev[1]].call(obj,this,evt)})}})()}}}if(obj.bindings&&obj.bindings.global){wBinds.global=[];for(var k in obj.bindings.global){var selector=obj.bindings.global[k],parentDOM=$("body");for(var i=0;i<selector.length;i++){(function(){var evs=selector[i],ev=evs.split("_"),cachedEvent=k+"_"+evs;wBinds.global.push(cachedEvent);if(!window.GLOBAL_EVENT_CACHE[cachedEvent]){window.GLOBAL_EVENT_CACHE[cachedEvent]=true}parentDOM.on(ev[0],"[data-"+k+"]",function(evt){bindExceptions(ev,evt,this);obj[ev[1]](this,evt)})})()}}}if(customParams){for(var k in customParams){obj[k]=customParams[k]}}obj.templates={};var templates=$('[type="text/template"]',obj.DOM),tplClass,tplContent;templates.map(function(index,data){tplClass=$(data).attr("class");tplContent=$(data).html().trim();obj.templates[tplClass]=tplContent});obj.isEditMode=!!location.search.match(/edit=true/);obj.destroy=function(){if(FLUIG_BINDS[widgetId]&&FLUIG_BINDS[widgetId].local){var localEvents=FLUIG_BINDS[widgetId].local,len=localEvents.length,cEvent,ev;for(var i=0;i<len;i++){cEvent=localEvents[i];ev=cEvent.split("_");$("#"+widgetId).off(ev[1],"[data-"+ev[0]+"]")}delete window.FLUIG_BINDS[widgetId].local}if(FLUIG_BINDS[widgetId]&&FLUIG_BINDS[widgetId].global){var globalEvents=FLUIG_BINDS[widgetId].global,len=globalEvents.length,cEvent,ev;for(var i=0;i<len;i++){cEvent=globalEvents[i];ev=cEvent.split("_");$("body").off(ev[1],"[data-"+ev[0]+"]")}delete window.FLUIG_BINDS[widgetId].global}delete window[widgetId]};obj.reloadWidget=function(code,ftl,params){var config=Object.create(customParams);if(!params){params={}}$.extend(config,params);WCMAPI.convertFtlAsync(code,ftl,JSON.stringify(config),function(html){$("#"+widgetId).replaceWith(html);obj.destroy();loadWidgets()})};obj.init();return obj}function rest(service,params,cb,errCb){var serviceObj=service,caller=this["rest"].caller,self=this,messageTitle,messageError,locale,social1,social2;if(!params){params=[]}var restResult={async:true,success:function(data){cb(data,self)},errorCallback:function(oObj,XMLHttpRequest,data,errorThrown,info){if(errCb){errCb(oObj,XMLHttpRequest,data,errorThrown,info,self)}else{if(oObj.status==403&&data&&data.origin&&data.origin=="SocialAccessControl"){locale=window.WCMAPI?WCMAPI.getLocale():"pt_BR";social1=(data.social1||"social 1").bold();social2=(data.social2||"social 2").bold();messageTitle=i18n[locale]["forbinden.title"];messageError=social1+i18n[locale]["forbinden.and"]+social2+i18n[locale]["forbiden.message"];if(FLUIGC){FLUIGC.toast({title:messageTitle,message:messageError,type:"danger"})}else{window.alert(messageError)}socialGlobal.hideLoading()}else{if(data&&data.message){if(socialGlobal.alert){socialGlobal.message({type:"error",text:data.message,timeout:3000})}else{alert(data.message)}}else{if(console){console.log(caller)}var message=i18n[locale]["error.generic"]+self.DOM[0].id+": "+data.error;if(FLUIGC&&FLUIGC.message){FLUIGC.message.alert({message:message,title:i18n[locale]["error.title"],label:"OK"},function(el,ev){})}else{alert(message)}}}}}};params.unshift(restResult);serviceObj.apply(null,params)}function restSync(service,params){var serviceObj=service,restResult={async:false};if(!params){params=[]}params.unshift(restResult);return serviceObj.apply(null,params)}window.SuperWidget={extend:extend,instance:instance,rest:rest,instanceId:null,DOM:null,restSync:restSync,mergeObjects:mergeObjects,destroy:null}})(window,document,jQuery);function Colour(){this.getIntegerRGB=function(){var _1=this.getRGB();return{r:Math.round(_1.r),g:Math.round(_1.g),b:Math.round(_1.b),a:_1.a}};this.getPercentageRGB=function(){var _2=this.getRGB();return{r:100*_2.r/255,g:100*_2.g/255,b:100*_2.b/255,a:_2.a}};this.getCSSHexadecimalRGB=function(){var _3=this.getIntegerRGB();var _4=_3.r.toString(16);var _5=_3.g.toString(16);var _6=_3.b.toString(16);return"#"+(_4.length==2?_4:"0"+_4)+(_5.length==2?_5:"0"+_5)+(_6.length==2?_6:"0"+_6)};this.getCSSIntegerRGB=function(){var _7=this.getIntegerRGB();return"rgb("+_7.r+","+_7.g+","+_7.b+")"};this.getCSSIntegerRGBA=function(){var _8=this.getIntegerRGB();return"rgb("+_8.r+","+_8.g+","+_8.b+","+_8.a+")"};this.getCSSPercentageRGB=function(){var _9=this.getPercentageRGB();return"rgb("+_9.r+"%,"+_9.g+"%,"+_9.b+"%)"};this.getCSSPercentageRGBA=function(){var _a=this.getPercentageRGB();return"rgb("+_a.r+"%,"+_a.g+"%,"+_a.b+"%,"+_a.a+")"};this.getCSSHSL=function(){var _b=this.getHSL();return"hsl("+_b.h+","+_b.s+"%,"+_b.l+"%)"};this.getCSSHSLA=function(){var _c=this.getHSL();return"hsl("+_c.h+","+_c.s+"%,"+_c.l+"%,"+_c.a+")"};this.setNodeColour=function(_d){_d.style.color=this.getCSSHexadecimalRGB()};this.setNodeBackgroundColour=function(_e){_e.style.backgroundColor=this.getCSSHexadecimalRGB()}}RGBColour.prototype=new Colour();function RGBColour(r,g,b,a){var _f=(a===undefined?1:Math.max(0,Math.min(1,a)));var rgb={r:Math.max(0,Math.min(255,r)),g:Math.max(0,Math.min(255,g)),b:Math.max(0,Math.min(255,b))};var hsv=null;var hsl=null;function _10(_11,_12){if(_12==0){var hue=0}else{switch(_11){case rgb.r:var hue=(rgb.g-rgb.b)/_12*60;if(hue<0){hue+=360}break;case rgb.g:var hue=(rgb.b-rgb.r)/_12*60+120;break;case rgb.b:var hue=(rgb.r-rgb.g)/_12*60+240;break}}return hue}function _13(){var _14=Math.max(rgb.r,rgb.g,rgb.b);var _15=_14-Math.min(rgb.r,rgb.g,rgb.b);hsv={h:_10(_14,_15),s:(_14==0?0:100*_15/_14),v:_14/2.55}}function _16(){var _17=Math.max(rgb.r,rgb.g,rgb.b);var _18=_17-Math.min(rgb.r,rgb.g,rgb.b);var l=_17/255-_18/510;hsl={h:_10(_17,_18),s:(_18==0?0:_18/2.55/(l<0.5?l*2:2-l*2)),l:100*l}}this.getRGB=function(){return{r:rgb.r,g:rgb.g,b:rgb.b,a:_f}};this.getHSV=function(){if(hsv==null){_13()}return{h:hsv.h,s:hsv.s,v:hsv.v,a:_f}};this.getHSL=function(){if(hsl==null){_16()}return{h:hsl.h,s:hsl.s,l:hsl.l,a:_f}};this.getLuminosity=function(){return this.getHSL().l<50?"dark":"light"}}HSVColour.prototype=new Colour();function HSVColour(h,s,v,a){var _19=(a===undefined?1:Math.max(0,Math.min(1,a)));var hsv={h:(h%360+360)%360,s:Math.max(0,Math.min(100,s)),v:Math.max(0,Math.min(100,v))};var rgb=null;var hsl=null;function _1a(){if(hsv.s==0){var r=hsv.v;var g=hsv.v;var b=hsv.v}else{var f=hsv.h/60-Math.floor(hsv.h/60);var p=hsv.v*(1-hsv.s/100);var q=hsv.v*(1-hsv.s/100*f);var t=hsv.v*(1-hsv.s/100*(1-f));switch(Math.floor(hsv.h/60)){case 0:var r=hsv.v;var g=t;var b=p;break;case 1:var r=q;var g=hsv.v;var b=p;break;case 2:var r=p;var g=hsv.v;var b=t;break;case 3:var r=p;var g=q;var b=hsv.v;break;case 4:var r=t;var g=p;var b=hsv.v;break;case 5:var r=hsv.v;var g=p;var b=q;break}}rgb={r:r*2.55,g:g*2.55,b:b*2.55}}function _1b(){var l=(2-hsv.s/100)*hsv.v/2;hsl={h:hsv.h,s:hsv.s*hsv.v/(l<50?l*2:200-l*2),l:l};if(isNaN(hsl.s)){hsl.s=0}}this.getRGB=function(){if(rgb==null){_1a()}return{r:rgb.r,g:rgb.g,b:rgb.b,a:_19}};this.getHSV=function(){return{h:hsv.h,s:hsv.s,v:hsv.v,a:_19}};this.getHSL=function(){if(hsl==null){_1b()}return{h:hsl.h,s:hsl.s,l:hsl.l,a:_19}};this.getLuminosity=function(){return this.getHSL().l<50?"dark":"light"}}HSLColour.prototype=new Colour();function HSLColour(h,s,l,a){var _1c=(a===undefined?1:Math.max(0,Math.min(1,a)));var hsl={h:(h%360+360)%360,s:Math.max(0,Math.min(100,s)),l:Math.max(0,Math.min(100,l))};var rgb=null;var hsv=null;function _1d(){if(hsl.s==0){rgb={r:hsl.l*2.55,g:hsl.l*2.55,b:hsl.l*2.55}}else{var p=hsl.l<50?hsl.l*(1+hsl.s/100):hsl.l+hsl.s-hsl.l*hsl.s/100;var q=2*hsl.l-p;rgb={r:(h+120)/60%6,g:h/60,b:(h+240)/60%6};for(var key in rgb){if(rgb.hasOwnProperty(key)){if(rgb[key]<1){rgb[key]=q+(p-q)*rgb[key]}else{if(rgb[key]<3){rgb[key]=p}else{if(rgb[key]<4){rgb[key]=q+(p-q)*(4-rgb[key])}else{rgb[key]=q}}}rgb[key]*=2.55}}}}function _1e(){var t=hsl.s*(hsl.l<50?hsl.l:100-hsl.l)/100;hsv={h:hsl.h,s:200*t/(hsl.l+t),v:t+hsl.l};if(isNaN(hsv.s)){hsv.s=0}}this.getRGB=function(){if(rgb==null){_1d()}return{r:rgb.r,g:rgb.g,b:rgb.b,a:_1c}};this.getHSV=function(){if(hsv==null){_1e()}return{h:hsv.h,s:hsv.s,v:hsv.v,a:_1c}};this.getHSL=function(){return{h:hsl.h,s:hsl.s,l:hsl.l,a:_1c}};this.getLuminosity=function(){return this.getHSL().l<50?"dark":"light"}}TAGColour.prototype=new Colour();function TAGColour(tag){var jtag=$("#"+tag);if(jtag.length==0){jtag=$("."+tag)}if(jtag.length>0){var rgbColor=null;var background=jtag.css("background-color");if(background){background=background.substring(background.indexOf("(")+1,background.indexOf(")"));var arrayRgb=background.split(",");if(arrayRgb&&arrayRgb.length>2){rgbColor=new RGBColour(arrayRgb[0],arrayRgb[1],arrayRgb[2])}}}this.getLuminosity=function(){return rgbColor?rgbColor.getLuminosity():null}};"use strict";(function(d){function h(a,b,e){var c="rgb"+(d.support.rgba?"a":"")+"("+parseInt(a[0]+e*(b[0]-a[0]),10)+","+parseInt(a[1]+e*(b[1]-a[1]),10)+","+parseInt(a[2]+e*(b[2]-a[2]),10);d.support.rgba&&(c+=","+(a&&b?parseFloat(a[3]+e*(b[3]-a[3])):1));return c+")"}function f(a){var b;return(b=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(a))?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),1]:(b=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(a))?[17*parseInt(b[1],16),17*parseInt(b[2],16),17*parseInt(b[3],16),1]:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),1]:(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),parseFloat(b[4])]:l[a]}d.extend(!0,d,{support:{rgba:function(){var a=d("script:first"),b=a.css("color"),e=!1;if(/^rgba/.test(b)){e=!0}else{try{e=b!=a.css("color","rgba(0, 0, 0, 0.5)").css("color"),a.css("color",b)}catch(c){}}return e}()}});var k="color backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor outlineColor".split(" ");d.each(k,function(a,b){d.Tween.propHooks[b]={get:function(a){return d(a.elem).css(b)},set:function(a){var c=a.elem.style,g=f(d(a.elem).css(b)),m=f(a.end);a.run=function(a){c[b]=h(g,m,a)}}}});d.Tween.propHooks.borderColor={set:function(a){var b=a.elem.style,e=[],c=k.slice(2,6);d.each(c,function(b,c){e[c]=f(d(a.elem).css(c))});var g=f(a.end);a.run=function(a){d.each(c,function(d,c){b[c]=h(e[c],g,a)})}}};var l={aqua:[0,255,255,1],azure:[240,255,255,1],beige:[245,245,220,1],black:[0,0,0,1],blue:[0,0,255,1],brown:[165,42,42,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgrey:[169,169,169,1],darkgreen:[0,100,0,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkviolet:[148,0,211,1],fuchsia:[255,0,255,1],gold:[255,215,0,1],green:[0,128,0,1],indigo:[75,0,130,1],khaki:[240,230,140,1],lightblue:[173,216,230,1],lightcyan:[224,255,255,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],magenta:[255,0,255,1],maroon:[128,0,0,1],navy:[0,0,128,1],olive:[128,128,0,1],orange:[255,165,0,1],pink:[255,192,203,1],purple:[128,0,128,1],violet:[128,0,128,1],red:[255,0,0,1],silver:[192,192,192,1],white:[255,255,255,1],yellow:[255,255,0,1],transparent:[255,255,255,0]}})(jQuery);(function(g){var y=function(a,h,f){var k=this,x;a=g(a);h="function"===typeof h?h(a.val(),void 0,a,f):h;k.init=function(){f=f||{};k.byPassKeys=[9,16,17,18,36,37,38,39,40,91];k.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};k.translation=g.extend({},k.translation,f.translation);k=g.extend(!0,{},k,f);a.each(function(){!1!==f.maxlength&&a.attr("maxlength",h.length);a.attr("autocomplete","off");d.destroyEvents();d.events();d.val(d.getMasked())})};var d={getCaret:function(){var c;c=0;var b=a.get(0),d=document.selection,e=b.selectionStart;if(d&&!~navigator.appVersion.indexOf("MSIE 10")){b.focus(),c=d.createRange(),c.moveStart("character",-b.value.length),c=c.text.length}else{if(e||"0"===e){c=e}}return c},setCaret:function(c){var b;b=a.get(0);b.setSelectionRange?(b.focus(),b.setSelectionRange(c,c)):b.createTextRange&&(b=b.createTextRange(),b.collapse(!0),b.moveEnd("character",c),b.moveStart("character",c),b.select())},events:function(){a.on("keydown.mask",function(){x=d.val()});a.on("keyup.mask",d.behaviour);a.on("paste.mask",function(){setTimeout(function(){a.keydown().keyup()},100)})},destroyEvents:function(){a.off("keydown.mask keyup.mask paste.mask")},val:function(c){var b=a.is("input");return 0<arguments.length?b?a.val(c):a.text(c):b?a.val():a.text()},behaviour:function(c){c=c||window.event;var b=c.keyCode||c.which;if(-1===g.inArray(b,k.byPassKeys)){var a,e=d.getCaret();e<d.val().length&&(a=!0);var f=d.getMasked();f!==d.val()&&d.val(f);!a||65===b&&c.ctrlKey||d.setCaret(e);return d.callbacks(c)}},getMasked:function(a){var b=[],g=d.val(),e=0,p=h.length,l=0,s=g.length,m=1,t="push",q=-1,n,u;f.reverse?(t="unshift",m=-1,n=0,e=p-1,l=s-1,u=function(){return -1<e&&-1<l}):(n=p-1,u=function(){return e<p&&l<s});for(;u();){var v=h.charAt(e),w=g.charAt(l),r=k.translation[v];if(r){w.match(r.pattern)?(b[t](w),r.recursive&&(-1===q?q=e:e===n&&(e=q-m),n===q&&(e-=m)),e+=m):r.optional&&(e+=m,l-=m),l+=m}else{if(!a){b[t](v)}w===v&&(l+=m);e+=m}}a=h.charAt(n);p!==s+1||k.translation[a]||b.push(a);return b.join("")},callbacks:function(c){var b=d.val(),g=d.val()!==x;if(!0===g&&"function"===typeof f.onChange){f.onChange(b,c,a,f)}if(!0===g&&"function"===typeof f.onKeyPress){f.onKeyPress(b,c,a,f)}if("function"===typeof f.onComplete&&b.length===h.length){f.onComplete(b,c,a,f)}}};k.remove=function(){d.destroyEvents();d.val(k.getCleanVal()).removeAttr("maxlength")};k.getCleanVal=function(){return d.getMasked(!0)};k.init()};g.fn.mask=function(a,h){return this.each(function(){g(this).data("mask",new y(this,a,h))})};g.fn.unmask=function(){return this.each(function(){try{g(this).data("mask").remove()}catch(a){}})};g.fn.cleanVal=function(){return g(this).data("mask").getCleanVal()};g("*[data-mask]").each(function(){var a=g(this),h={};"true"===a.attr("data-mask-reverse")&&(h.reverse=!0);"false"===a.attr("data-mask-maxlength")&&(h.maxlength=!1);a.mask(a.attr("data-mask"),h)})})(window.jQuery||window.Zepto);(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(global.Mustache)}}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return !testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template){return[]}var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length){delete tokens[spaces.pop()]}}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string"){tagsToCompile=tagsToCompile.split(spaceRe,2)}if(!isArray(tagsToCompile)||tagsToCompile.length!==2){throw new Error("Invalid tags: "+tagsToCompile)}openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n"){stripSpace()}}}if(!scanner.scan(openingTagRe)){break}hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else{if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}}if(!scanner.scan(closingTagRe)){throw new Error("Unclosed tag at "+scanner.pos)}token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else{if(type==="/"){openSection=sections.pop();if(!openSection){throw new Error('Unopened section "'+value+'" at '+start)}if(openSection[1]!==value){throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}}else{if(type==="name"||type==="{"||type==="&"){nonSpace=true}else{if(type==="="){compileTags(value)}}}}}openSection=sections.pop();if(openSection){throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos)}return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0){return""}var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case -1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){value=context.view;names=name.split(".");index=0;while(value!=null&&index<names.length){if(index===names.length-1){lookupHit=hasProperty(value,names[index])}value=value[names[index++]]}}else{value=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit){break}context=context.parent}cache[name]=value}if(isFunction(value)){value=value.call(this.view)}return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null){tokens=cache[template]=parseTemplate(template,tags)}return tokens};Writer.prototype.render=function render(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#"){value=this.renderSection(token,context,partials,originalTemplate)}else{if(symbol==="^"){value=this.renderInverted(token,context,partials,originalTemplate)}else{if(symbol===">"){value=this.renderPartial(token,context,partials,originalTemplate)}else{if(symbol==="&"){value=this.unescapedValue(token,context)}else{if(symbol==="name"){value=this.escapedValue(token,context)}else{if(symbol==="text"){value=this.rawValue(token)}}}}}}if(value!==undefined){buffer+=value}}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value){return}if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else{if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else{if(isFunction(value)){if(typeof originalTemplate!=="string"){throw new Error("Cannot use higher-order sections without the original template")}value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null){buffer+=value}}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}}}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0){return this.renderTokens(token[4],context,partials,originalTemplate)}};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials){return}var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null){return this.renderTokens(this.parse(value),context,partials,value)}};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null){return value}};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null){return mustache.escape(value)}};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="2.2.1";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" but "'+typeStr(template)+'" was given as the first argument for mustache#render(template, view, partials)')}return defaultWriter.render(template,view,partials)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer});var FLUIGBC=(function(FLUIGBC,$,WCMAPI){var currentLocale=WCMAPI?WCMAPI.getLocale():"pt_BR";var i18n={pt_BR:{selectdocument:"Selecionar imagem do ECM",upload:"Enviar imagem",select:"Selecionar",close:"Fechar",selectfolder:"Selecione somente uma pasta de destino.",uploadFileErrorMessage:"Ocorreu algum erro ao tentar realizar o upload do arquivo.",makeDocPublic:"Tornar público",makeDocPrivate:"Manter privado",docConfigDisclaimer:"Por padrão, apenas usuários da plataforma poderão acessar esta imagem. Deseja torná-la pública para que usuários não autenticados possam visualizá-la?",makeDocPublicErrorMessage:"Não foi possível realizar a operação solicitada neste momento. Tente novamente mais tarde.",makeDocPublicSuccessMessage:"Visibilidade do documento alterada com sucesso!",imageMimeTypeInvalid:'Tipo de arquivo inválido. Os tipos de arquivos suportados para imagem são: ".gif, .jpeg, .png ou .svg"',imagenotsupported:"São permitidos apenas os formatos: PNG, JPEG, JPG, GIF ou SVG"},en_US:{selectdocument:"Select ECM image",upload:"Upload Image",select:"Select",close:"Close",selectfolder:"Select only one destination folder.",uploadFileErrorMessage:"An error occurred while trying to upload the file.",makeDocPublic:"Make it public",makeDocPrivate:"Keep private",docConfigDisclaimer:"By default, only platform users will be able to access this image. Do you want to make it public so that unauthenticated users can view it?",makeDocPublicErrorMessage:"The requested operation could not be performed at this time. Try again later.",makeDocPublicSuccessMessage:"Document visibility changed successfully!",imageMimeTypeInvalid:'Invalid file type. The supported file types for image are: <br/> ".gif, .jpeg, .png or .svg"',imagenotsupported:"Only formats: PNG, JPEG, JPG, GIF or SVG are allowed"},es:{selectdocument:"Seleccionar imagen de ECM",upload:"Cargar imagen",select:"Seleccione",close:"Cerca",selectfolder:"Seleccione solo una carpeta de destino.",uploadFileErrorMessage:"Se produjo un error al intentar cargar el archivo.",makeDocPublic:"Hazlo público",makeDocPrivate:"Mantener privado",docConfigDisclaimer:"Por defecto, solo los usuarios de la plataforma podrán acceder a esta imagen. ¿Desea hacerlo público para que los usuarios no autenticados puedan verlo?",makeDocPublicErrorMessage:"La operación solicitada no se pudo realizar en este momento. Intenta nuevamente más tarde.",makeDocPublicSuccessMessage:"¡La visibilidad del documento cambió con éxito!",imageMimeTypeInvalid:'Tipo de archivo invalido. Los tipos de archivo admitidos para la imagen son: <br/> ".gif, .jpeg, .png o .svg"',imagenotsupported:"Solo formatos: PNG, JPEG, JPG, GIF o SVG están permitidos"}}[currentLocale];FLUIGBC.selectImage=function(cb){var $dataFluigFixPosition,fixPosition,$inputFile=$('<input type="file">'),userCode=WCMAPI.getUserCode(),currentFolder=FLUIGC.localStorage.getItem("socialArticleCurrentFolder_"+userCode)||0,modalId="upload-image-"+Date.now(),loader=FLUIGC.loading(window),modalLoader,modalContentBlocker,$modalFooterEl,$progressBarEl,$progressBarWrapperEl;function init(){openModal()}function openModal(){FLUIGC.modal({title:i18n.selectdocument,size:"large",content:{widgetCode:"ecm_finddocument",ftl:"finddocument.ftl",callback:function(err,data){if(!err){ECM.findDocument.navigation.after.subscribe(function(state){toggleUploadButtonVisibility(state.hasWritePermission)});ECM.findDocument.getDocuments(currentFolder,"1-2",false)}}},id:modalId,actions:[{label:i18n.upload,bind:"data-upload-file",classType:"btn-default"},{label:i18n.close,bind:"data-close-modal",classType:"btn-default hide",actionClose:true},{label:i18n.select,bind:"data-download-file",classType:"btn-primary"}]},function(){bindings();var panelZindex=+$(".wcm-panel").css("z-index")||1000050;var $containerModal=$("#"+modalId).parents(".container-modal");var $backdropModal=$containerModal.siblings(".modal-backdrop");$containerModal.css("z-index",panelZindex+20);$backdropModal.css("z-index",panelZindex+10);modalLoader=FLUIGC.loading("#"+modalId);var _modalContentBlocker=FLUIGC.loading("#"+modalId+" .modal-body",{css:{margin:"-9999px"}});modalContentBlocker={show:function(){_modalContentBlocker.show();$("#"+modalId+" .modal-body").css({overflow:"hidden"})},hide:function(){_modalContentBlocker.hide();$("#"+modalId+" .modal-body").css({overflow:"auto"})}};$modalFooterEl=$("#"+modalId+" .modal-footer");$modalFooterEl.css({position:"relative"});if(FLUIGC.utilities.checkBrowser().isIe9()){fixPosition=setInterval(function(){$dataFluigFixPosition=$("[data-fluig-fix-position]");if($dataFluigFixPosition.length){$dataFluigFixPosition.css("position","");clearInterval(fixPosition)}},200)}})}function bindings(){$("#"+modalId).on("click","[data-upload-file]",uploadFile);$("#"+modalId).on("click","[data-download-file]",downloadFile);$("#"+modalId).on("click","[data-close-modal]",closeModal)}function uploadFile(ev){var IMAGE_VALID_MIMETYPES=["image/gif","image/jpeg","image/png","image/svg+xml",];$inputFile.fileupload({dataType:"html",url:"/ecm/upload",add:function(e,data){var file=data.files[0];if(!~IMAGE_VALID_MIMETYPES.indexOf(file.type)){WCMC.messageWarn(i18n.imageMimeTypeInvalid);return}modalLoader.show();showUploadProgress();data.submit()},success:function(rawFileBag,data){var fileBag=JSON.parse(rawFileBag),file=fileBag.files[0],saveDocReq=getSaveDocReq(file);saveDocReq.done(function(data){refreshAndSelectFirst(showDocumentConfig);modalLoader.hide();$progressBarWrapperEl.remove()})},error:function(){modalLoader.hide();FLUIGC.toast({message:i18n.uploadFileErrorMessage,type:"danger"})},progressall:function(e,data){var progress=parseInt(data.loaded/data.total*100,10);$progressBarEl.css({width:progress+"%"})}}).click()}function downloadFile(ev){var selectedRows=ECM.findDocument.dataTable.selectedRows,loading=FLUIGC.loading("#tab-article-content-editor"),allValidFiles=true;if(selectedRows.length===0){WCMC.messageWarn(i18n.selectfolder);return false}$.each(selectedRows,function(idx,val){var doc=ECM.findDocument.dataTable.getData(val);if(!validateFilesTypes(doc.documentDescription,[".png",".jpg",".jpeg",".gif",".svg"])){allValidFiles=false}});if(!allValidFiles){WCMC.messageWarn(i18n.imagenotsupported);return false}loading.show();var deferreds=[];$.each(selectedRows,function(idx,val){var doc=ECM.findDocument.dataTable.getData(val),docReq=ECM.findDocument.byId(doc.documentId);deferreds.push(docReq.done(function(_doc){return _doc}))});$.when.apply($,deferreds).then(function(){var images=[];[].forEach.call(arguments,function(_doc){var imageUrl=_doc.publicDocument?_doc.publicUrl:["/webdesk/streamcontrol/?WDCompanyId="+_doc.companyId,"WDNrDocto="+_doc.id,"WDNrVersao="+_doc.version,].join("&");images.push({url:imageUrl,alt:_doc.description})});sendCallback(images)});loading.hide();closeModal()}function closeModal(ev){FLUIGC.localStorage.setItem("socialArticleCurrentFolder_"+userCode,ECM.findDocument.currentFolder);if(FLUIGC.utilities.checkBrowser().isIe9()){clearInterval(fixPosition)}$("#"+modalId).modal("hide")}function toggleUploadButtonVisibility(show){$("[data-upload-file]")[(show?"remove":"add")+"Class"]("hide")}function getSaveDocReq(file){return $.post({url:"/ecm/api/rest/ecm/documentPublisher/saveNewItemUpload/",dataType:"json",contentType:"application/json",data:JSON.stringify({documentId:ECM.findDocument.currentFolder,fileName:file.name,setTimeStamp:true})})}function getPatchDocPermissionReq(documentId,docPublic){return $.ajax({url:"/document/api/v1/documents/"+documentId,method:"PATCH",dataType:"json",contentType:"application/json",data:JSON.stringify([{op:"replace",path:"/publicDocument",value:docPublic}])})}function makeDocPublicClicked(e){var el=e.target,documentId=el.dataset.documentId,docPublic=el.dataset.makeDocPublic,req=getPatchDocPermissionReq(documentId,docPublic);loader.show();req.done(function(res){FLUIGC.toast({message:i18n.makeDocPublicSuccessMessage,type:"success"})});req.error(function(res){FLUIGC.toast({message:i18n.makeDocPublicErrorMessage,type:"danger"})});req.always(function(res){loader.hide();$(".document-config-wrapper","#"+modalId).remove();refreshAndSelectFirst()})}function showDocumentConfig(document){var style={"document-config-wrapper":["position: absolute","width: 100%","height: 100%","top: 0","left: 0","display: flex","align-items: center","padding: 15px","background: #ffffff",].join(";"),"document-disclaimer":["flex: 1","margin: 0","text-align: left","font-size: 0.9em","line-height: 1.3em",].join(";"),};var template=['<div class="document-config-wrapper" style="'+style["document-config-wrapper"]+'">','	<p class="document-disclaimer" style="'+style["document-disclaimer"]+'">'+i18n.docConfigDisclaimer+"</p>",'	<button type="button" class="btn btn-default" data-make-doc-public="true" data-document-id="'+document.documentId+'">'+i18n.makeDocPublic+"</button>",'	<button type="button" class="btn btn-primary" data-make-doc-public="false" data-document-id="'+document.documentId+'">'+i18n.makeDocPrivate+"</button>","</div>",].join("");modalContentBlocker.show();$modalFooterEl.append(elFromStr(template)).on("click","[data-make-doc-public]",function(e){modalContentBlocker.hide();makeDocPublicClicked(e)})}function showUploadProgress(){var style={"upload-progress-wrapper":["position: absolute","width: 100%","height: 100%","top: 0","left: 0","display: flex","align-items: center","padding: 15px","background: #ffffff",].join(";"),"upload-progress":["width: 100%","margin: 0",].join(";"),};var template=['<div class="upload-progress-wrapper" style="'+style["upload-progress-wrapper"]+'">','	<div class="progress upload-progress" style="'+style["upload-progress"]+'">','		<div class="progress-bar progress-bar-success" style="width: 0%;">',"		</div>","	</div>","</div>",].join("");$modalFooterEl.append(elFromStr(template));$progressBarWrapperEl=$modalFooterEl.find(".upload-progress-wrapper");$progressBarEl=$progressBarWrapperEl.find(".progress-bar")}function refreshAndSelectFirst(cbk){ECM.findDocument.refreshTable(function(){ECM.findDocument.selectFirstDocument(cbk)})}function elFromStr(htmlString,rootTag){var root=document.createElement(rootTag||"div");root.innerHTML=htmlString.trim();return root.firstChild}function validateFilesTypes(path,type){var isValidFile=false,len=type.length,i=0;for(i;i<len;i++){if(path.toLocaleLowerCase().indexOf(type[i])!==-1){isValidFile=true;break}}return isValidFile}function sendCallback(images){cb(null,{images:images})}init()};return FLUIGBC})(window.FLUIGBC||{},window.jQuery,window.WCMAPI);var FLUIGBC=(function(FLUIGBC,$,WCMAPI){var currentLocale=WCMAPI?WCMAPI.getLocale():"pt_BR";var i18n={pt_BR:{selectdocument:"Selecionar video do ECM",select:"Selecionar",close:"Fechar",selectfolder:"Selecione somente uma pasta de destino.",videonotsupported:"São permitidos apenas os formatos: MP4 ou FLV",upload:"Enviar vídeo",uploadFileErrorMessage:"Ocorreu algum erro ao tentar realizar o upload do arquivo.",makeDocPublicSuccessMessage:"Visibilidade do documento alterada com sucesso!",makeDocPublicErrorMessage:"Não foi possível realizar a operação solicitada neste momento. Tente novamente mais tarde.",docConfigDisclaimer:"Por padrão, apenas usuários da plataforma poderão acessar este vídeo. Deseja torná-la pública para que usuários não autenticados possam visualizá-la?",makeDocPublic:"Tornar público",makeDocPrivate:"Manter privado",},en_US:{selectdocument:"Select video from ECM",select:"Select",close:"Close",selectfolder:"Only select a destination folder.",videonotsupported:"Only the following formats are allowed: MP4 or FLV",upload:"Upload video",uploadFileErrorMessage:"Some error occurred trying to upload the file.",makeDocPublicSuccessMessage:"Document visibility changed successfully!",makeDocPublicErrorMessage:"The requested operation could not be performed at this time. Try again later.",docConfigDisclaimer:"By default, only platform users will be able to access this video. Do you want to make it public so that unauthenticated users can view it? ",makeDocPublic:"Make public",makeDocPrivate:"Keep private",},es:{selectdocument:"Seleccione Vídeo ECM",select:"Seleccionar",close:"Cerrar",selectfolder:"Sólo seleccione una carpeta de destino.",videonotsupported:"Solo se permiten los formatos: MP4 o FLV",upload:"Subir video",uploadFileErrorMessage:"Se ha producido un error al intentar cargar el archivo.",makeDocPublicSuccessMessage:"Visibilidad del documento cambiado con éxito!",makeDocPublicErrorMessage:"No se pudo realizar la operación solicitada en este momento. Intenta nuevamente más tarde. ",docConfigDisclaimer:"De forma predeterminada, sólo los usuarios de la plataforma podrán acceder a esta vídeo. ¿Desea hacerla pública para que los usuarios no autenticados puedan verla? ",makeDocPublic:"Hacer público",makeDocPrivate:"Mantener privado",}}[currentLocale];FLUIGBC.selectVideo=function(cb){var $dataFluigFixPosition,fixPosition,userCode=WCMAPI.getUserCode(),currentFolder=FLUIGC.localStorage.getItem("socialArticleCurrentFolder_"+userCode)||0,modalId="upload-video-"+Date.now(),$inputFile=$('<input type="file">'),loader=FLUIGC.loading(window),swfUrl="",modalLoader,modalContentBlocker,$modalFooterEl,$progressBarEl,$progressBarWrapperEl;if(WCMAPI){swfUrl=' data-swf="'+WCMAPI.getServerURL()+'/style-guide/utils/fluigVideo.swf" '}function init(){openModal()}function openModal(){FLUIGC.modal({title:i18n.selectdocument,size:"large",content:{widgetCode:"ecm_finddocument",ftl:"finddocument.ftl",callback:function(err,data){if(!err){ECM.findDocument.navigation.after.subscribe(function(state){toggleUploadButtonVisibility(state.hasWritePermission)});ECM.findDocument.getDocuments(currentFolder,"1-2",false)}}},id:modalId,actions:[{label:i18n.upload,bind:"data-upload-file",classType:"btn-default"},{label:i18n.close,bind:"data-close-modal",classType:"btn-default hide",actionClose:true},{label:i18n.select,bind:"data-download-file",classType:"btn-primary"}]},function(){bindings();var panelZindex=+$(".wcm-panel").css("z-index")||1000050;var $containerModal=$("#"+modalId).parents(".container-modal");var $backdropModal=$containerModal.siblings(".modal-backdrop");$containerModal.css("z-index",panelZindex+20);$backdropModal.css("z-index",panelZindex+10);modalLoader=FLUIGC.loading("#"+modalId);var _modalContentBlocker=FLUIGC.loading("#"+modalId+" .modal-body",{css:{margin:"-9999px"}});modalContentBlocker={show:function(){_modalContentBlocker.show();$("#"+modalId+" .modal-body").css({overflow:"hidden"})},hide:function(){_modalContentBlocker.hide();$("#"+modalId+" .modal-body").css({overflow:"auto"})}};$modalFooterEl=$("#"+modalId+" .modal-footer");$modalFooterEl.css({position:"relative"});if(FLUIGC.utilities.checkBrowser().isIe9()){fixPosition=setInterval(function(){$dataFluigFixPosition=$("[data-fluig-fix-position]");if($dataFluigFixPosition.length){$dataFluigFixPosition.css("position","");clearInterval(fixPosition)}},200)}})}function bindings(){$("#"+modalId).on("click","[data-upload-file]",uploadFile);$("#"+modalId).on("click","[data-download-file]",downloadFile);$("#"+modalId).on("click","[data-close-modal]",closeModal)}function uploadFile(ev){var VIDEO_VALID_MIMETYPES=["video/x-flv","video/mp4",];$inputFile.fileupload({dataType:"html",url:"/ecm/upload",add:function(e,data){var file=data.files[0];if(!~VIDEO_VALID_MIMETYPES.indexOf(file.type)){WCMC.messageWarn(i18n.videonotsupported);return}modalLoader.show();showUploadProgress();data.submit()},success:function(rawFileBag,data){var fileBag=JSON.parse(rawFileBag),file=fileBag.files[0],saveDocReq=getSaveDocReq(file);saveDocReq.done(function(data){refreshAndSelectFirst(showDocumentConfig);modalLoader.hide();$progressBarWrapperEl.remove()})},error:function(){modalLoader.hide();FLUIGC.toast({message:i18n.uploadFileErrorMessage,type:"danger"})},progressall:function(e,data){var progress=parseInt(data.loaded/data.total*100,10);$progressBarEl.css({width:progress+"%"})}}).click()}function downloadFile(ev){var selectedRows=ECM.findDocument.dataTable.selectedRows,loading=FLUIGC.loading("#tab-article-content-editor"),allValidFiles=true;if(selectedRows.length===0){WCMC.messageWarn(i18n.selectfolder);return false}$.each(selectedRows,function(idx,val){var doc=ECM.findDocument.dataTable.getData(val);if(!validateFilesTypes(doc.documentDescription,[".flv",".mp4"])){allValidFiles=false}});if(!allValidFiles){WCMC.messageWarn(i18n.videonotsupported);return false}loading.show();var deferreds=[];$.each(selectedRows,function(idx,val){var doc=ECM.findDocument.dataTable.getData(val),docReq=ECM.findDocument.byId(doc.documentId);deferreds.push(docReq.done(function(_doc){return _doc}))});$.when.apply($,deferreds).then(function(){var videos=[];[].forEach.call(arguments,function(_doc){var videoExtension=getFileExtension(_doc.description);var videoUrl=_doc.publicDocument?_doc.publicUrl:["/webdesk/streamcontrol/?WDCompanyId="+_doc.companyId,"WDNrDocto="+_doc.id,"WDNrVersao="+_doc.version].join("&");var VIDEO_MIMETYPES_MAP={flv:"video/x-flv",mp4:"video/mp4"};videoUrl=videoUrl+"&."+videoExtension;videos.push({url:videoUrl,mimeType:VIDEO_MIMETYPES_MAP[videoExtension],swfUrl:swfUrl})});sendCallback(videos)});loading.hide();closeModal()}function closeModal(ev){FLUIGC.localStorage.setItem("socialArticleCurrentFolder_"+userCode,ECM.findDocument.currentFolder);if(FLUIGC.utilities.checkBrowser().isIe9()){clearInterval(fixPosition)}$("#"+modalId).modal("hide")}function toggleUploadButtonVisibility(show){$("[data-upload-file]")[(show?"remove":"add")+"Class"]("hide")}function getSaveDocReq(file){return $.post({url:"/ecm/api/rest/ecm/documentPublisher/saveNewItemUpload/",dataType:"json",contentType:"application/json",data:JSON.stringify({documentId:ECM.findDocument.currentFolder,fileName:file.name,setTimeStamp:true})})}function getPatchDocPermissionReq(documentId,docPublic){return $.ajax({url:"/document/api/v1/documents/"+documentId,method:"PATCH",dataType:"json",contentType:"application/json",data:JSON.stringify([{op:"replace",path:"/publicDocument",value:docPublic}])})}function makeDocPublicClicked(e){var el=e.target,documentId=el.dataset.documentId,docPublic=el.dataset.makeDocPublic,req=getPatchDocPermissionReq(documentId,docPublic);loader.show();req.done(function(res){FLUIGC.toast({message:i18n.makeDocPublicSuccessMessage,type:"success"})});req.error(function(res){FLUIGC.toast({message:i18n.makeDocPublicErrorMessage,type:"danger"})});req.always(function(res){loader.hide();$(".document-config-wrapper","#"+modalId).remove();refreshAndSelectFirst()})}function showDocumentConfig(document){var style={"document-config-wrapper":["position: absolute","width: 100%","height: 100%","top: 0","left: 0","display: flex","align-items: center","padding: 15px","background: #ffffff",].join(";"),"document-disclaimer":["flex: 1","margin: 0","text-align: left","font-size: 0.9em","line-height: 1.3em",].join(";"),};var template=['<div class="document-config-wrapper" style="'+style["document-config-wrapper"]+'">','	<p class="document-disclaimer" style="'+style["document-disclaimer"]+'">'+i18n.docConfigDisclaimer+"</p>",'	<button type="button" class="btn btn-default" data-make-doc-public="true" data-document-id="'+document.documentId+'">'+i18n.makeDocPublic+"</button>",'	<button type="button" class="btn btn-primary" data-make-doc-public="false" data-document-id="'+document.documentId+'">'+i18n.makeDocPrivate+"</button>","</div>",].join("");modalContentBlocker.show();$modalFooterEl.append(elFromStr(template)).on("click","[data-make-doc-public]",function(e){modalContentBlocker.hide();makeDocPublicClicked(e)})}function showUploadProgress(){var style={"upload-progress-wrapper":["position: absolute","width: 100%","height: 100%","top: 0","left: 0","display: flex","align-items: center","padding: 15px","background: #ffffff",].join(";"),"upload-progress":["width: 100%","margin: 0",].join(";"),};var template=['<div class="upload-progress-wrapper" style="'+style["upload-progress-wrapper"]+'">','	<div class="progress upload-progress" style="'+style["upload-progress"]+'">','		<div class="progress-bar progress-bar-success" style="width: 0%;">',"		</div>","	</div>","</div>",].join("");$modalFooterEl.append(elFromStr(template));$progressBarWrapperEl=$modalFooterEl.find(".upload-progress-wrapper");$progressBarEl=$progressBarWrapperEl.find(".progress-bar")}function refreshAndSelectFirst(cbk){ECM.findDocument.refreshTable(function(){ECM.findDocument.selectFirstDocument(cbk)})}function elFromStr(htmlString,rootTag){var root=document.createElement(rootTag||"div");root.innerHTML=htmlString.trim();return root.firstChild}function validateFilesTypes(path,type){var isValidFile=false,len=type.length,i=0;for(i;i<len;i++){if(path.toLocaleLowerCase().indexOf(type[i])!==-1){isValidFile=true;break}}return isValidFile}function getFileExtension(filename){return filename.split(".").pop()}function sendCallback(videos){cb(null,{videos:videos})}init()};return FLUIGBC})(window.FLUIGBC||{},window.jQuery,window.WCMAPI);(function(FLUIGBC){var createdListener=false;var messagesEnum={selectImage:"SELECT_IMAGE",selectVideo:"SELECT_VIDEO",callbackSelectImage:"CALLBACK_SELECT_IMAGE",callbackSelectVideo:"CALLBACK_SELECT_VIDEO"};function receiveMessage(event){if(event.origin!==window.location.origin||!event.data){return false}try{var data=JSON.parse(event.data);var message=data.message;var windowTarget=event.source;if(message===messagesEnum.selectImage){windowTarget=window["window-"+data.editorName];FLUIGBC.selectImage(function(err,data){if(err){console.error("Não foi possível selecionar a imagem.");return false}sendMessage(windowTarget,data,messagesEnum.callbackSelectImage)})}if(message===messagesEnum.selectVideo){windowTarget=window["window-"+data.editorName];FLUIGBC.selectVideo(function(err,data){if(err){console.error("Não foi possível selecionar o vídeo.");return false}sendMessage(windowTarget,data,messagesEnum.callbackSelectVideo)})}}catch(error){}}function sendMessage(windowTarget,data,message){if(windowTarget&&windowTarget.postMessage){windowTarget.postMessage(JSON.stringify({message:message,value:data}),window.location.origin)}}if(!createdListener){createdListener=true;window.addEventListener("message",receiveMessage,false)}})(window.FLUIGBC);(function($){var originalConfig={template:'<div class="totvs-popover"><div class="wrapper-popover"></div></div>',elementTarget:".totvs-popover",startDelay:0,endDelay:0,fadeIn:0,fadeOut:0,height:"auto",width:"auto",calcHeight:0,calcWidth:0,popoverPosition:"auto",subTop:0,subLeft:0,onMouseEnter:$.noop,onMouseLeave:$.noop,onClick:undefined},myTimeout,oldElement;function show(ev,el){var that=el?el:this,config=$(that).children().data("config");if(!$(that).find(config.elementTarget).length){$(that).append(config.template)}clearTimeout(myTimeout);if(!$(config.elementTarget+":visible").length){myTimeout=setTimeout(function(){oldElement=that;if(config.popoverPosition==="auto"){positionPopoverAuto(that,ev)}else{popoverPositionFn(config.popoverPosition,that,ev)}},config.startDelay)}else{if(that!=oldElement){oldElement=that;config.onMouseLeave(that,ev);$(config.elementTarget).hide();if(config.popoverPosition==="auto"){positionPopoverAuto(that,ev)}else{popoverPositionFn(config.popoverPosition,that,ev)}}}}function hide(ev,el){var that=el?el:this,config=$(that).children().data("config"),parent=$(that).parent();clearTimeout(myTimeout);if($(config.elementTarget).is(":visible")){myTimeout=setTimeout(function(){$(config.elementTarget,parent).fadeOut(config.fadeOut,function(){config.onMouseLeave(parent,ev)})},config.endDelay)}}function elClick(ev){var config=$(this).children().data("config");if(!$(this).find(config.elementTarget).length){$(this).append(config.template)}if(!$(config.elementTarget+":visible").length){show(ev,this);$(this).children().data("config").onClick(this);$(document).on("click",function allClick(event){if(!$(event.target).closest(config.elementTarget).length){if($(config.elementTarget).is(":visible")){$(config.elementTarget).hide();$(document).off("click",allClick)}}})}}function elMouseEnter(ev){show(ev,this)}function elMouseLeave(ev){hide(ev,this)}function popoverPositionFn(positionType,parent,ev){var config=$(parent).children().data("config"),sEl=$(parent),elHeigth=sEl.outerHeight(),elWidth=sEl.outerWidth(),popoverHeight=(config.calcHeight)?config.calcHeight:$(config.elementTarget).outerHeight(),popoverWidth=(config.calcWidth)?config.calcWidth:$(config.elementTarget).outerWidth(),left,top;if(positionType==="topLeft"){left=sEl.position().left;top=sEl.position().top+elHeigth}if(positionType==="topRight"){left=sEl.position().left-popoverWidth+elWidth;top=sEl.position().top+elHeigth}if(positionType==="bottomLeft"){left=sEl.position().left;top=sEl.position().top-popoverHeight}if(positionType==="bottomRight"){left=sEl.position().left-popoverWidth+elWidth;top=sEl.position().top-popoverHeight}$(config.elementTarget,parent).attr("data-popover-position",positionType).css({height:config.height,width:config.width,top:top,left:left}).fadeIn(config.fadeIn,function(){config.onMouseEnter(parent,ev)})}function positionPopoverAuto(el,ev){var config=$(el).children().data("config"),sEl=$(el),ePopover=sEl.find(".totvs-popover"),sWindow=$(window),elOffsetTop=sEl.offset().top,elOffsetLeft=sEl.offset().left,elHeigth=sEl.outerHeight(),elWidth=sEl.outerWidth(),popoverHeight=(config.calcHeight)?config.calcHeight:$(config.elementTarget).outerHeight(),popoverWidth=(config.calcWidth)?config.calcWidth:$(config.elementTarget).outerWidth(),windowHeight=sWindow.outerHeight(),windowWidth=sWindow.outerWidth(),windowScrollTop=sWindow.scrollTop(),windowScrollLeft=sWindow.scrollLeft(),verticalPosition=(elOffsetTop-windowScrollTop)-popoverHeight<0+config.subTop,horizontalPosition=(elOffsetLeft-windowScrollLeft)+elWidth+popoverWidth>windowWidth+config.subLeft;if(verticalPosition&&!horizontalPosition){popoverPositionFn("topLeft",el,ev);return false}if(verticalPosition&&horizontalPosition){popoverPositionFn("topRight",el,ev);return false}if(!verticalPosition&&!horizontalPosition){popoverPositionFn("bottomLeft",el,ev);return false}if(!verticalPosition&&horizontalPosition){popoverPositionFn("bottomRight",el,ev);return false}}$.fn.totvsPopover=function(settings){var config=Object.create(originalConfig),that=this;if(settings){$.extend(config,settings)}that.data("config",config);return that.each(function(){if(!$(this).parent(".wrap-element-popover").length){if(that.data().config.onClick){$(this).wrapAll('<span class="wrap-element-popover"></span>').parent(".wrap-element-popover").on({click:elClick,})}else{$(this).wrapAll('<span class="wrap-element-popover"></span>').parent(".wrap-element-popover").on({mouseenter:elMouseEnter,mouseleave:elMouseLeave})}}})}})(jQuery);